<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd">
     <changeSet author="ben" id="1303384038461-1">
        <createTable tableName="BATCH_JOB_EXECUTION">
            <column name="JOB_EXECUTION_ID" type="BIGINT">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="VERSION" type="BIGINT"/>
            <column name="JOB_INSTANCE_ID" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="CREATE_TIME" type="DATETIME">
                <constraints nullable="false"/>
            </column>
            <column name="START_TIME" type="DATETIME"/>
            <column name="END_TIME" type="DATETIME"/>
            <column name="STATUS" type="VARCHAR(10)"/>
            <column name="EXIT_CODE" type="VARCHAR(100)"/>
            <column name="EXIT_MESSAGE" type="VARCHAR(2500)"/>
            <column name="LAST_UPDATED" type="DATETIME"/>
        </createTable>
    </changeSet>
    <changeSet author="ben" id="1303384038461-2">
        <createTable tableName="BATCH_JOB_EXECUTION_CONTEXT">
            <column name="JOB_EXECUTION_ID" type="BIGINT">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="SHORT_CONTEXT" type="VARCHAR(2500)">
                <constraints nullable="false"/>
            </column>
            <column name="SERIALIZED_CONTEXT" type="TEXT"/>
        </createTable>
    </changeSet>
    <changeSet author="ben" id="1303384038461-3">
        <createTable tableName="BATCH_JOB_EXECUTION_SEQ">
            <column name="ID" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="ben" id="1303384038461-4">
        <createTable tableName="BATCH_JOB_INSTANCE">
            <column name="JOB_INSTANCE_ID" type="BIGINT">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="VERSION" type="BIGINT"/>
            <column name="JOB_NAME" type="VARCHAR(100)">
                <constraints nullable="false"/>
            </column>
            <column name="JOB_KEY" type="VARCHAR(32)">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="ben" id="1303384038461-5">
        <createTable tableName="BATCH_JOB_PARAMS">
            <column name="JOB_INSTANCE_ID" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="TYPE_CD" type="VARCHAR(6)">
                <constraints nullable="false"/>
            </column>
            <column name="KEY_NAME" type="VARCHAR(100)">
                <constraints nullable="false"/>
            </column>
            <column name="STRING_VAL" type="VARCHAR(250)"/>
            <column name="DATE_VAL" type="DATETIME"/>
            <column name="LONG_VAL" type="BIGINT"/>
            <column name="DOUBLE_VAL" type="DOUBLE"/>
        </createTable>
    </changeSet>
    <changeSet author="ben" id="1303384038461-6">
        <createTable tableName="BATCH_JOB_SEQ">
            <column name="ID" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="ben" id="1303384038461-7">
        <createTable tableName="BATCH_STEP_EXECUTION">
            <column name="STEP_EXECUTION_ID" type="BIGINT">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="VERSION" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="STEP_NAME" type="VARCHAR(100)">
                <constraints nullable="false"/>
            </column>
            <column name="JOB_EXECUTION_ID" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="START_TIME" type="DATETIME">
                <constraints nullable="false"/>
            </column>
            <column name="END_TIME" type="DATETIME"/>
            <column name="STATUS" type="VARCHAR(10)"/>
            <column name="COMMIT_COUNT" type="BIGINT"/>
            <column name="READ_COUNT" type="BIGINT"/>
            <column name="FILTER_COUNT" type="BIGINT"/>
            <column name="WRITE_COUNT" type="BIGINT"/>
            <column name="READ_SKIP_COUNT" type="BIGINT"/>
            <column name="WRITE_SKIP_COUNT" type="BIGINT"/>
            <column name="PROCESS_SKIP_COUNT" type="BIGINT"/>
            <column name="ROLLBACK_COUNT" type="BIGINT"/>
            <column name="EXIT_CODE" type="VARCHAR(100)"/>
            <column name="EXIT_MESSAGE" type="VARCHAR(2500)"/>
            <column name="LAST_UPDATED" type="DATETIME"/>
        </createTable>
    </changeSet>
    <changeSet author="ben" id="1303384038461-8">
        <createTable tableName="BATCH_STEP_EXECUTION_CONTEXT">
            <column name="STEP_EXECUTION_ID" type="BIGINT">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="SHORT_CONTEXT" type="VARCHAR(2500)">
                <constraints nullable="false"/>
            </column>
            <column name="SERIALIZED_CONTEXT" type="TEXT"/>
        </createTable>
    </changeSet>
    <changeSet author="ben" id="1303384038461-9">
        <createTable tableName="BATCH_STEP_EXECUTION_SEQ">
            <column name="ID" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="ben" id="1303384038461-10">
        <addForeignKeyConstraint baseColumnNames="JOB_INSTANCE_ID" baseTableName="BATCH_JOB_EXECUTION" constraintName="JOB_INST_EXEC_FK" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="JOB_INSTANCE_ID" referencedTableName="BATCH_JOB_INSTANCE"/>
    </changeSet>
    <changeSet author="ben" id="1303384038461-11">
        <addForeignKeyConstraint baseColumnNames="JOB_EXECUTION_ID" baseTableName="BATCH_JOB_EXECUTION_CONTEXT" constraintName="JOB_EXEC_CTX_FK" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="JOB_EXECUTION_ID" referencedTableName="BATCH_JOB_EXECUTION"/>
    </changeSet>
    <changeSet author="ben" id="1303384038461-12">
        <addForeignKeyConstraint baseColumnNames="JOB_INSTANCE_ID" baseTableName="BATCH_JOB_PARAMS" constraintName="JOB_INST_PARAMS_FK" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="JOB_INSTANCE_ID" referencedTableName="BATCH_JOB_INSTANCE"/>
    </changeSet>
    <changeSet author="ben" id="1303384038461-13">
        <addForeignKeyConstraint baseColumnNames="JOB_EXECUTION_ID" baseTableName="BATCH_STEP_EXECUTION" constraintName="JOB_EXEC_STEP_FK" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="JOB_EXECUTION_ID" referencedTableName="BATCH_JOB_EXECUTION"/>
    </changeSet>
    <changeSet author="ben" id="1303384038461-14">
        <addForeignKeyConstraint baseColumnNames="STEP_EXECUTION_ID" baseTableName="BATCH_STEP_EXECUTION_CONTEXT" constraintName="STEP_EXEC_CTX_FK" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="STEP_EXECUTION_ID" referencedTableName="BATCH_STEP_EXECUTION"/>
    </changeSet>
    <changeSet author="ben" id="1303384038461-15">
        <createIndex indexName="JOB_INST_EXEC_IDX" tableName="BATCH_JOB_EXECUTION" unique="false">
            <column name="JOB_INSTANCE_ID"/>
        </createIndex>
    </changeSet>
    <changeSet author="ben" id="1303384038461-16">
        <createIndex indexName="JOB_EXECUTION_IDX" tableName="BATCH_JOB_EXECUTION" unique="true">
            <column name="JOB_EXECUTION_ID"/>
        </createIndex>
    </changeSet>
    <changeSet author="ben" id="1303384038461-17">
        <createIndex indexName="JOB_EXECUTION_CONTEXT_IDX" tableName="BATCH_JOB_EXECUTION_CONTEXT" unique="true">
            <column name="JOB_EXECUTION_ID"/>
        </createIndex>
    </changeSet>
    <changeSet author="ben" id="1303384038461-18">
        <createIndex indexName="JOB_INST_IDX" tableName="BATCH_JOB_INSTANCE" unique="true">
            <column name="JOB_NAME"/>
            <column name="JOB_KEY"/>
        </createIndex>
    </changeSet>
    <changeSet author="ben" id="1303384038461-19">
        <createIndex indexName="JOB_INSTANCE_IDX" tableName="BATCH_JOB_INSTANCE" unique="true">
            <column name="JOB_INSTANCE_ID"/>
        </createIndex>
    </changeSet>
    <changeSet author="ben" id="1303384038461-20">
        <createIndex indexName="JOB_INST_PARAMS_IDX" tableName="BATCH_JOB_PARAMS" unique="false">
            <column name="JOB_INSTANCE_ID"/>
        </createIndex>
    </changeSet>
    <changeSet author="ben" id="1303384038461-21">
        <createIndex indexName="JOB_EXEC_STEP_IDX" tableName="BATCH_STEP_EXECUTION" unique="false">
            <column name="JOB_EXECUTION_ID"/>
        </createIndex>
    </changeSet>
    <changeSet author="ben" id="1303384038461-22">
        <createIndex indexName="STEP_EXECUTION_IDX" tableName="BATCH_STEP_EXECUTION" unique="true">
            <column name="STEP_EXECUTION_ID"/>
        </createIndex>
    </changeSet>
    <changeSet author="ben" id="1303384038461-23">
        <createIndex indexName="STEP_EXECUTION_CONTEXT_IDX" tableName="BATCH_STEP_EXECUTION_CONTEXT" unique="true">
            <column name="STEP_EXECUTION_ID"/>
        </createIndex>
    </changeSet>
    <changeSet author="ben" id="1303384038461-24">
      <insert tableName="BATCH_STEP_EXECUTION_SEQ" >
        <column name="ID" valueNumeric="0"/>         
      </insert>
    </changeSet>
    <changeSet author="ben" id="1303384038461-25">
      <insert tableName="BATCH_JOB_EXECUTION_SEQ" >
        <column name="ID" valueNumeric="0"/>         
      </insert>
    </changeSet>
    <changeSet author="ben" id="1303384038461-26">
      <insert tableName="BATCH_JOB_SEQ" >
        <column name="ID" valueNumeric="0"/>         
      </insert>
    </changeSet>
    <changeSet author="ben" id="2011-05-25_1">
       <createTable tableName="Content">
            <column name="id" type="bigint">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="DTYPE" type="varchar(31)">
                <constraints nullable="false"/>
            </column>
            <column name="created" type="datetime"/>
            <column name="creator" type="varchar(255)"/>
            <column name="identifier" type="varchar(255)"/>
            <column name="license" type="varchar(255)"/>
            <column name="modified" type="datetime"/>
            <column name="source" type="varchar(255)"/>
            <column name="feature" type="varchar(255)"/>
            <column name="content" type="varchar(255)"/>
            <column name="taxon_id" type="bigint"/>
        </createTable>
    </changeSet>
    <changeSet author="ben" id="2011-05-25_2">
       <createTable tableName="Distribution">
            <column name="id" type="bigint">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="created" type="datetime"/>
            <column name="creator" type="varchar(255)"/>
            <column name="identifier" type="varchar(255)"/>
            <column name="license" type="varchar(255)"/>
            <column name="modified" type="datetime"/>
            <column name="source" type="varchar(255)"/>
            <column name="region" type="varchar(255)"/>
            <column name="taxon_id" type="bigint"/>
        </createTable>
    </changeSet>
    <changeSet author="ben" id="2011-05-25_3">
       <createTable tableName="Image">
            <column name="id" type="bigint">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="created" type="datetime"/>
            <column name="creator" type="varchar(255)"/>
            <column name="identifier" type="varchar(255)"/>
            <column name="license" type="varchar(255)"/>
            <column name="modified" type="datetime"/>
            <column name="source" type="varchar(255)"/>
            <column name="url" type="varchar(255)"/>
        </createTable>
    </changeSet>
    <changeSet author="ben" id="2011-05-25_4">
       <createTable tableName="Reference">
            <column name="id" type="bigint">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="DTYPE" type="varchar(31)">
                <constraints nullable="false"/>
            </column>
            <column name="created" type="datetime"/>
            <column name="creator" type="varchar(255)"/>
            <column name="identifier" type="varchar(255)"/>
            <column name="license" type="varchar(255)"/>
            <column name="modified" type="datetime"/>
            <column name="source" type="varchar(255)"/>
        </createTable>
    </changeSet>
    <changeSet author="ben" id="2011-05-25_5">
       <createTable tableName="Taxon">
            <column name="id" type="bigint">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="created" type="datetime"/>
            <column name="creator" type="varchar(255)"/>
            <column name="identifier" type="varchar(255)"/>
            <column name="license" type="varchar(255)"/>
            <column name="modified" type="datetime"/>
            <column name="source" type="varchar(255)"/>
            <column name="name" type="varchar(255)"/>
            <column name="accepted_id" type="bigint"/>
            <column name="parent_id" type="bigint"/>
        </createTable>
    </changeSet>
    <changeSet author="ben" id="2011-05-25_6">
       <createTable tableName="Taxon_Image">
            <column name="Taxon_id" type="bigint">
                <constraints nullable="false"/>
            </column>
            <column name="images_id" type="bigint">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="ben" id="2011-05-25_7">
       <createTable tableName="Taxon_Reference">
            <column name="Taxon_id" type="bigint">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="references_id" type="bigint">
                <constraints nullable="false" primaryKey="true"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="ben" id="2011-05-25_8">
        <addForeignKeyConstraint constraintName="FK9BEFCC591EDCD08D" baseTableName="Content" baseColumnNames="taxon_id"
           referencedTableName="Taxon" referencedColumnNames="id"
        />
    </changeSet>
    <changeSet author="ben" id="2011-05-25_9">
        <createIndex tableName="Content" indexName="Content_taxon_id_IDX">
          <column name="taxon_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="ben" id="2011-05-25_10">
        <addForeignKeyConstraint constraintName="FKAB93A2A41EDCD08D" baseTableName="Distribution" baseColumnNames="taxon_id"
           referencedTableName="Taxon" referencedColumnNames="id"
        />
    </changeSet>
    <changeSet author="ben" id="2011-05-25_11">
        <createIndex tableName="Distribution" indexName="Distribution_taxon_id_IDX">
          <column name="taxon_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="ben" id="2011-05-25_12">
        <addForeignKeyConstraint constraintName="FK4CD9EAA54493690" baseTableName="Taxon" baseColumnNames="accepted_id"
           referencedTableName="Taxon" referencedColumnNames="id"
        />
    </changeSet>
    <changeSet author="ben" id="2011-05-25_13">
        <createIndex tableName="Taxon" indexName="Taxon_accepted_id_IDX">
          <column name="accepted_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="ben" id="2011-05-25_14">
        <addForeignKeyConstraint constraintName="FK4CD9EAAA9E98AAD" baseTableName="Taxon" baseColumnNames="parent_id"
           referencedTableName="Taxon" referencedColumnNames="id"
        />
    </changeSet>
    <changeSet author="ben" id="2011-05-25_15">
        <createIndex tableName="Taxon" indexName="Taxon_parent_id_IDX">
          <column name="parent_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="ben" id="2011-05-25_16">
        <addForeignKeyConstraint constraintName="FK56D693661EDCD08D" baseTableName="Taxon_Image" baseColumnNames="Taxon_id"
           referencedTableName="Taxon" referencedColumnNames="id"
        />
    </changeSet>
    <changeSet author="ben" id="2011-05-25_17">
        <createIndex tableName="Taxon_Image" indexName="Taxon_Image_Taxon_id_IDX">
          <column name="Taxon_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="ben" id="2011-05-25_18">
        <addForeignKeyConstraint constraintName="FK56D69366437564A" baseTableName="Taxon_Image" baseColumnNames="images_id"
           referencedTableName="Image" referencedColumnNames="id"
        />
    </changeSet>
    <changeSet author="ben" id="2011-05-25_19">
        <createIndex tableName="Taxon_Image" indexName="Taxon_Image_images_id_IDX">
          <column name="images_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="ben" id="2011-05-25_20">
        <addForeignKeyConstraint constraintName="FK164D2BD6968322D1" baseTableName="Taxon_Reference" baseColumnNames="references_id"
           referencedTableName="Reference" referencedColumnNames="id"
        />
    </changeSet>
    <changeSet author="ben" id="2011-05-25_21">
        <createIndex tableName="Taxon_Reference" indexName="Taxon_Reference_references_id_IDX">
          <column name="references_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="ben" id="2011-05-25_22">
        <addForeignKeyConstraint constraintName="FK164D2BD61EDCD08D" baseTableName="Taxon_Reference" baseColumnNames="Taxon_id"
           referencedTableName="Taxon" referencedColumnNames="id"
        />
    </changeSet>
    <changeSet author="ben" id="2011-05-25_23">
        <createIndex tableName="Taxon_Reference" indexName="Taxon_Reference_Taxon_id_IDX">
          <column name="Taxon_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="ben" id="2011-06-22_1">
      <createTable tableName="logging_event">
            <column name="event_id" type="bigint" autoIncrement="true">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="timestmp" type="bigint">
                <constraints nullable="false"/>
            </column>
            <column name="formatted_message" type="text">
                <constraints nullable="false"/>
            </column>
            <column name="logger_name" type="varchar(254)">
                <constraints nullable="false"/>
            </column>
            <column name="level_string" type="varchar(254)">
                <constraints nullable="false"/>
            </column>
            <column name="thread_name" type="varchar(254)"/>
            <column name="reference_flag" type="smallint"/>
            <column name="arg0" type="varchar(254)"/>
            <column name="arg1" type="varchar(254)"/>
            <column name="arg2" type="varchar(254)"/>
            <column name="arg3" type="varchar(254)"/>
            <column name="caller_filename" type="varchar(254)">
                <constraints nullable="false"/>
            </column>
            <column name="caller_class" type="varchar(254)">
                <constraints nullable="false"/>
            </column>
            <column name="caller_method" type="varchar(254)">
                <constraints nullable="false"/>
            </column>
            <column name="caller_line" type="char(4)">
                <constraints nullable="false"/>
            </column>
      </createTable>
    </changeSet>
    <changeSet author="ben" id="2011-06-22_2">
      <createTable tableName="logging_event_property">
            <column name="event_id" type="bigint">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="mapped_key" type="varchar(254)">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="mapped_value" type="text"/>
      </createTable>
    </changeSet>
    <changeSet author="ben" id="2011-06-22_3">
      <createTable tableName="logging_event_exception">
            <column name="event_id" type="bigint">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="i" type="smallint">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="trace_line" type="varchar(254)">
              <constraints nullable="false"/>
            </column>
      </createTable>
    </changeSet>
    <changeSet author="ben" id="2011-06-22_4">
        <addForeignKeyConstraint constraintName="FK_logging_event_property_logging_event" baseTableName="logging_event_property" baseColumnNames="event_id"
           referencedTableName="logging_event" referencedColumnNames="event_id"
        />
    </changeSet>
    <changeSet author="ben" id="2011-06-22_5">
        <addForeignKeyConstraint constraintName="FK_logging_event_exception_logging_event" baseTableName="logging_event_exception" baseColumnNames="event_id"
           referencedTableName="logging_event" referencedColumnNames="event_id"
        />
    </changeSet>
    <changeSet author="ben" id="2011-07-28_1">
      <addColumn tableName="Taxon">
        <column name="authorship" type="varchar(255)"/>
      </addColumn>
    </changeSet>
    <changeSet author="ben" id="2011-07-28_2">
      <addColumn tableName="Taxon">
        <column name="basionymAuthorship" type="varchar(255)"/>
      </addColumn>
    </changeSet>
    <changeSet author="ben" id="2011-07-28_3">
      <addColumn tableName="Taxon">
        <column name="uninomial" type="varchar(255)"/>
      </addColumn>
    </changeSet>
    <changeSet author="ben" id="2011-07-28_4">
      <addColumn tableName="Taxon">
        <column name="genus" type="varchar(255)"/>
      </addColumn>
    </changeSet>
    <changeSet author="ben" id="2011-07-28_5">
      <addColumn tableName="Taxon">
        <column name="specificEpithet" type="varchar(255)"/>
      </addColumn>
    </changeSet>
    <changeSet author="ben" id="2011-07-28_6">
      <addColumn tableName="Taxon">
        <column name="infraspecificEpithet" type="varchar(255)"/>
      </addColumn>
    </changeSet>
    <changeSet author="ben" id="2011-07-28_7">
      <addColumn tableName="Taxon">
        <column name="rank" type="varchar(255)"/>
      </addColumn>
    </changeSet>
    <changeSet author="ben" id="2011-08-12_1">
      <addColumn tableName="Taxon">
        <column name="accordingTo" type="varchar(255)"/>
      </addColumn>
    </changeSet>
    <changeSet author="ben" id="2011-08-12_2">
      <addColumn tableName="Taxon">
        <column name="family" type="varchar(255)"/>
      </addColumn>
    </changeSet>
    <changeSet author="ben" id="2011-08-12_3">
      <addColumn tableName="Taxon">
        <column name="infraGenericEpithet" type="varchar(255)"/>
      </addColumn>
    </changeSet>
    <changeSet author="ben" id="2011-08-12_4">
      <addColumn tableName="Taxon">
        <column name="kingdom" type="varchar(255)"/>
      </addColumn>
    </changeSet>
    <changeSet author="ben" id="2011-08-12_5">
      <addColumn tableName="Taxon">
        <column name="nomenclaturalCode" type="varchar(255)"/>
      </addColumn>
    </changeSet>
    <changeSet author="ben" id="2011-08-12_6">
      <addColumn tableName="Taxon">
        <column name="ordr" type="varchar(255)"/>
      </addColumn>
    </changeSet>
    <changeSet author="ben" id="2011-08-12_7">
      <addColumn tableName="Taxon">
        <column name="phylum" type="varchar(255)"/>
      </addColumn>
    </changeSet>
    <changeSet author="ben" id="2011-08-12_8">
      <addColumn tableName="Taxon">
        <column name="status" type="varchar(255)"/>
      </addColumn>
    </changeSet>
    <changeSet author="ben" id="2011-08-12_9">
      <createTable tableName="Annotation">
            <column name="id" type="bigint" autoIncrement="true">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="annotatedObjId" type="bigint"/>
            <column name="annotatedObjType" type="varchar(255)"/>
            <column name="code" type="varchar(255)"/>
            <column name="jobId" type="bigint"/>
            <column name="present" type="boolean" defaultValueBoolean="false">
              <constraints nullable="false"/>
            </column>
            <column name="text" type="varchar(255)"/>
      </createTable>
    </changeSet>
    <changeSet author="ben" id="2011-08-18_1">
      <modifyDataType tableName="Content" columnName="content" newDataType="longtext"/>
    </changeSet>
    <changeSet author="ben" id="2011-08-18_2">
      <modifyDataType tableName="Annotation" columnName="text" newDataType="longtext"/>      
    </changeSet>
    <changeSet author="ben" id="2011-08-18_3">
      <addColumn tableName="Image">
        <column name="caption" type="varchar(255)"/>
      </addColumn> 
    </changeSet>
    <changeSet author="jk00kg" id="2011-08-19_1">
      <addColumn tableName="Image">
        <column name="taxon_id" type="bigint"/>
      </addColumn> 
    </changeSet>
    <changeSet author="ben" id="2011-08-26_1">
      <addColumn tableName="Reference">
        <column name="datePublished" type="varchar(255)"/>
      </addColumn> 
    </changeSet>
    <changeSet author="ben" id="2011-08-26_2">
      <addColumn tableName="Reference">
        <column name="pages" type="varchar(255)"/>
      </addColumn> 
    </changeSet>
    <changeSet author="ben" id="2011-08-26_3">
      <addColumn tableName="Reference">
        <column name="title" type="varchar(255)"/>
      </addColumn> 
    </changeSet>
    <changeSet author="ben" id="2011-08-26_4">
      <addColumn tableName="Reference">
        <column name="volume" type="varchar(255)"/>
      </addColumn> 
    </changeSet>
    <changeSet author="ben" id="2011-08-26_5">
      <addColumn tableName="Reference">
        <column name="type" type="integer"/>
      </addColumn> 
    </changeSet>
    <changeSet author="ben" id="2011-08-26_7">
      <addColumn tableName="Taxon">
        <column name="protologue_id" type="bigint"/>
      </addColumn> 
    </changeSet>
    <changeSet author="ben" id="2011-08-26_8">
        <addForeignKeyConstraint baseColumnNames="protologue_id" baseTableName="Taxon" constraintName="FK4CD9EAACA0AED" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="Reference"/>
    </changeSet>
    <changeSet author="ben" id="2011-08-26_9">
        <createIndex indexName="Taxon_protologue_IDX" tableName="Taxon" unique="false">
            <column name="protologue_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="ben" id="2011-08-26_10">
        <dropColumn tableName="Reference" columnName="DTYPE"/>
    </changeSet>
    <changeSet id="2011-08-31_1" author="ben">
      <addColumn tableName="Annotation">
        <column name="dateTime" type="integer"/>
      </addColumn>
    </changeSet>
    <changeSet id="2011-08-31_2" author="ben">
      <addColumn tableName="Annotation">
        <column name="type" type="varchar(255)"/>
      </addColumn>
    </changeSet>
    <changeSet id="2011-08-31_3" author="ben">
      <addColumn tableName="Annotation">
        <column name="authority_id" type="bigint"/>
      </addColumn>
    </changeSet>
    <changeSet id="2011-08-31_4" author="ben">
      <createTable tableName="Authority">
          <column name="id" type="bigint" autoIncrement="true">
            <constraints nullable="false" primaryKey="true"/>
          </column>
          <column name="name" type="varchar(255)"/>
          <column name="uri" type="varchar(255)"/>
      </createTable>
    </changeSet>
    <changeSet id="2011-08-31_5" author="ben">
      <createTable tableName="Content_Authority">
          <column name="Content_id" type="bigint">
            <constraints nullable="false" primaryKey="true"/>
          </column>
          <column name="authorities_id" type="bigint">
            <constraints nullable="false"/>
          </column>
          <column name="authorities_KEY" type="integer">
            <constraints nullable="false" primaryKey="true"/>
          </column>
      </createTable>
    </changeSet>
    <changeSet id="2011-08-31_6" author="ben">
      <createTable tableName="Distribution_Authority">
          <column name="Distribution_id" type="bigint">
            <constraints nullable="false" primaryKey="true"/>
          </column>
          <column name="authorities_id" type="bigint">
            <constraints nullable="false"/>
          </column>
          <column name="authorities_KEY" type="integer">
            <constraints nullable="false" primaryKey="true"/>
          </column>
      </createTable>
    </changeSet>
    <changeSet id="2011-08-31_7" author="ben">
      <createTable tableName="Image_Authority">
          <column name="Image_id" type="bigint">
            <constraints nullable="false" primaryKey="true"/>
          </column>
          <column name="authorities_id" type="bigint">
            <constraints nullable="false"/>
          </column>
          <column name="authorities_KEY" type="integer">
            <constraints nullable="false" primaryKey="true"/>
          </column>
      </createTable>
    </changeSet>
    <changeSet id="2011-08-31_8" author="ben">
      <createTable tableName="Reference_Authority">
          <column name="Reference_id" type="bigint">
            <constraints nullable="false" primaryKey="true"/>
          </column>
          <column name="authorities_id" type="bigint">
            <constraints nullable="false"/>
          </column>
          <column name="authorities_KEY" type="integer">
            <constraints nullable="false" primaryKey="true"/>
          </column>
      </createTable>
    </changeSet>
    <changeSet id="2011-08-31_9" author="ben">
      <createTable tableName="Taxon_Authority">
          <column name="Taxon_id" type="bigint">
            <constraints nullable="false" primaryKey="true"/>
          </column>
          <column name="authorities_id" type="bigint">
            <constraints nullable="false"/>
          </column>
          <column name="authorities_KEY" type="integer">
            <constraints nullable="false" primaryKey="true"/>
          </column>
      </createTable>
    </changeSet>
    <changeSet id="2011-08-31_10" author="ben">
      <addForeignKeyConstraint constraintName="FK35CA12BD59FA9B5F" 
                               referencedTableName="Content"
                               baseColumnNames="Content_id"
                               baseTableName="Content_Authority"
                               referencedColumnNames="id"/>
    </changeSet>
    <changeSet id="2011-08-31_11" author="ben">
      <addForeignKeyConstraint constraintName="FK35CA12BD2AFF4188" 
                               referencedTableName="Authority"
                               baseColumnNames="authorities_id"
                               baseTableName="Content_Authority"
                               referencedColumnNames="id"/>
    </changeSet>
    <changeSet id="2011-08-31_12" author="ben">
      <addForeignKeyConstraint constraintName="FK221AC748BFDB6E15" 
                               referencedTableName="Distribution"
                               baseColumnNames="Distribution_id"
                               baseTableName="Distribution_Authority"
                               referencedColumnNames="id"/>
    </changeSet>
    <changeSet id="2011-08-31_13" author="ben">
      <addForeignKeyConstraint constraintName="FK221AC7482AFF4188" 
                               referencedTableName="Authority"
                               baseColumnNames="authorities_id"
                               baseTableName="Distribution_Authority"
                               referencedColumnNames="id"/>
    </changeSet>
    <changeSet id="2011-08-31_14" author="ben">
      <addForeignKeyConstraint constraintName="FK7800CD1F544A087" 
                               referencedTableName="Image"
                               baseColumnNames="Image_id"
                               baseTableName="Image_Authority"
                               referencedColumnNames="id"/>
    </changeSet>
    <changeSet id="2011-08-31_15" author="ben">
      <addForeignKeyConstraint constraintName="FK7800CD1F2AFF4188" 
                               referencedTableName="Authority"
                               baseColumnNames="authorities_id"
                               baseTableName="Image_Authority"
                               referencedColumnNames="id"/>
    </changeSet>
    <changeSet id="2011-08-31_16" author="ben">
      <addForeignKeyConstraint constraintName="FK5B73C70F1914B32E" 
                               referencedTableName="Reference"
                               baseColumnNames="Reference_id"
                               baseTableName="Reference_Authority"
                               referencedColumnNames="id"/>
    </changeSet>
    <changeSet id="2011-08-31_17" author="ben">
      <addForeignKeyConstraint constraintName="FK5B73C70F2AFF4188" 
                               referencedTableName="Authority"
                               baseColumnNames="authorities_id"
                               baseTableName="Reference_Authority"
                               referencedColumnNames="id"/>
    </changeSet>
    <changeSet id="2011-08-31_18" author="ben">
      <addForeignKeyConstraint constraintName="FKA565F3CE1EDCD08D" 
                               referencedTableName="Taxon"
                               baseColumnNames="Taxon_id"
                               baseTableName="Taxon_Authority"
                               referencedColumnNames="id"/>
    </changeSet>
    <changeSet id="2011-08-31_19" author="ben">
      <addForeignKeyConstraint constraintName="FKA565F3CE2AFF4188" 
                               referencedTableName="Authority"
                               baseColumnNames="authorities_id"
                               baseTableName="Taxon_Authority"
                               referencedColumnNames="id"/>
    </changeSet>
    <changeSet id="2011-08-31_20" author="ben">
      <addForeignKeyConstraint constraintName="FK1A21C74F92954226" 
                               referencedTableName="Authority"
                               baseColumnNames="authority_id"
                               baseTableName="Annotation"
                               referencedColumnNames="id"/>
    </changeSet>
    <changeSet id="2011-08-31_21" author="ben">
      <insert tableName="Authority">
        <column name="id" valueNumeric="1"/>
        <column name="name" value="WCS"/>
        <column name="uri" value="http://apps.kew.org/wcsTaxonExtractor/oai"/>
      </insert>
    </changeSet>
    <changeSet id="2011-08-31_22" author="ben">
      <insert tableName="Authority">
        <column name="id" valueNumeric="2"/>
        <column name="name" value="PalmWeb"/>
        <column name="uri" value="http://www.palmweb.org/archive.zip"/>
      </insert>
    </changeSet>
    <changeSet id="2011-08-31_23" author="ben">
      <createTable tableName="Time">
          <column name="id" type="bigint">
            <constraints nullable="false" primaryKey="true"/>
          </column>
          <column name="year" type="int(11)">
            <constraints nullable="false"/>
          </column>
          <column name="quarter" type="int(11)">
            <constraints nullable="false"/>
          </column>
          <column name="month" type="int(11)">
            <constraints nullable="false"/>
          </column>
          <column name="month_name" type="varchar(10)">
            <constraints nullable="false"/>
          </column>
          <column name="week" type="int(11)">
            <constraints nullable="false"/>
          </column>
          <column name="day" type="int(11)">
            <constraints nullable="false"/>
          </column>
          <column name="day_name" type="varchar(10)">
            <constraints nullable="false"/>
          </column>
      </createTable>
    </changeSet>
    <changeSet id="2011-08-31_24" author="ben">
      <sql>
        DROP PROCEDURE IF EXISTS populateDate;
      </sql>
    </changeSet>
    <changeSet id="2011-08-31_25" author="ben">
      <createProcedure>
        CREATE PROCEDURE populateDate()
        BEGIN          
          DECLARE dt DATE;
          SET @i = 0;
          REPEAT
            SET dt = adddate('2011-08-01',@i);
            INSERT INTO Time VALUES (datediff(dt,'2011-08-01'),year(dt),quarter(dt),month(dt),monthname(dt),week(dt),weekday(dt),dayname(dt));
            SET @i = @i + 1;
            UNTIL @i > 365
          END REPEAT;
        END;
      </createProcedure>        
    </changeSet>
    <changeSet id="2011-08-31_26" author="ben">
      <sql>
        call populateDate();
      </sql>        
    </changeSet>
    <changeSet id="2011-09-01_1" author="ben">
      <dropColumn tableName="Annotation" columnName="present"/>
    </changeSet>
    <changeSet id="2011-09-01_2" author="ben">
      <createTable tableName="Region">
          <column name="id" type="varchar(3)">
            <constraints nullable="false" primaryKey="true"/>
          </column>
          <column name="country" type="varchar(32)">
            <constraints nullable="false"/>
          </column>
          <column name="region" type="varchar(32)">
            <constraints nullable="false"/>
          </column>
          <column name="continent" type="varchar(16)">
            <constraints nullable="false"/>
          </column>
      </createTable>
    </changeSet>
    <changeSet id="2011-09-01_3" author="ben">
        <loadData tableName="Region" file="../emonocot-persistence/src/main/resources/regions.csv">
            <column name="id" index="0" type="STRING"/>
            <column name="country" index="1" type="STRING"/>
            <column name="region" index="2" type="STRING"/>
            <column name="continent" index="3" type="STRING"/>
        </loadData>
    </changeSet>
    <changeSet id="2011-09-04_1" author="ben">
      <addColumn tableName="Reference">
        <column name="author" type="varchar(255)"/>
      </addColumn>
    </changeSet>
    <changeSet id="2011-09-04_2" author="ben">
      <addColumn tableName="Reference">
        <column name="citation" type="varchar(255)"/>
      </addColumn>
    </changeSet>
    <changeSet id="2011-09-04_3" author="ben">
      <addColumn tableName="Reference">
        <column name="publishedIn" type="varchar(255)"/>
      </addColumn>
    </changeSet>
    <changeSet id="2011-09-05_1" author="ben">
      <addColumn tableName="Content">
        <column name="authority_id" type="bigint"/>
      </addColumn>
    </changeSet>
    <changeSet id="2011-09-05_2" author="ben">
      <addColumn tableName="Distribution">
        <column name="authority_id" type="bigint"/>
      </addColumn>
    </changeSet>
    <changeSet id="2011-09-05_3" author="ben">
      <addColumn tableName="Image">
        <column name="authority_id" type="bigint"/>
      </addColumn>
    </changeSet>
    <changeSet id="2011-09-05_4" author="ben">
      <addColumn tableName="Reference">
        <column name="authority_id" type="bigint"/>
      </addColumn>
    </changeSet>
    <changeSet id="2011-09-05_5" author="ben">
      <addColumn tableName="Taxon">
        <column name="authority_id" type="bigint"/>
      </addColumn>
    </changeSet>
    <changeSet id="2011-09-05_6" author="ben">
      <addForeignKeyConstraint constraintName="FK9BEFCC5992954226" 
                               referencedTableName="Authority"
                               baseColumnNames="authority_id"
                               baseTableName="Content"
                               referencedColumnNames="id"/>
    </changeSet>
    <changeSet id="2011-09-05_7" author="ben">
      <addForeignKeyConstraint constraintName="FKAB93A2A492954226" 
                               referencedTableName="Authority"
                               baseColumnNames="authority_id"
                               baseTableName="Distribution"
                               referencedColumnNames="id"/>
    </changeSet>
    <changeSet id="2011-09-05_8" author="ben">
      <addForeignKeyConstraint constraintName="FK437B93B92954226" 
                               referencedTableName="Authority"
                               baseColumnNames="authority_id"
                               baseTableName="Image"
                               referencedColumnNames="id"/>
    </changeSet>
    <changeSet id="2011-09-05_9" author="ben">
      <addForeignKeyConstraint constraintName="FK404D5F2B92954226" 
                               referencedTableName="Authority"
                               baseColumnNames="authority_id"
                               baseTableName="Reference"
                               referencedColumnNames="id"/>
    </changeSet>
    <changeSet id="2011-09-05_10" author="ben">
      <addForeignKeyConstraint constraintName="FK4CD9EAA92954226" 
                               referencedTableName="Authority"
                               baseColumnNames="authority_id"
                               baseTableName="Taxon"
                               referencedColumnNames="id"/>
    </changeSet>
    <changeSet id="2011-09-05_11" author="ben">
      <sql>
        update Content left join Content_Authority on (Content.id = Content_Authority.Content_id) set authority_id = Content_Authority.authorities_id where Content_Authority.authorities_KEY = 0;
      </sql>
    </changeSet>
    <changeSet id="2011-09-05_12" author="ben">
      <sql>
        update Distribution left join Distribution_Authority on (Distribution.id = Distribution_Authority.Distribution_id) set authority_id = Distribution_Authority.authorities_id where Distribution_Authority.authorities_KEY = 0;
      </sql>
    </changeSet>
    <changeSet id="2011-09-05_13" author="ben">
      <sql>
        update Image left join Image_Authority on (Image.id = Image_Authority.Image_id)  set authority_id = Image_Authority.authorities_id where Image_Authority.authorities_KEY = 0;
      </sql>
    </changeSet>
    <changeSet id="2011-09-05_14" author="ben">
      <sql>
        update Reference left join Reference_Authority on (Reference.id = Reference_Authority.Reference_id) set authority_id = Reference_Authority.authorities_id where Reference_Authority.authorities_KEY = 0;
      </sql>
    </changeSet>
    <changeSet id="2011-09-05_15" author="ben">
      <sql>
        update Taxon left join Taxon_Authority on (Taxon.id = Taxon_Authority.Taxon_id) set authority_id = Taxon_Authority.authorities_id where Taxon_Authority.authorities_KEY = 0;
      </sql>
    </changeSet>
    <changeSet id="2011-09-05_16" author="ben">
      <dropColumn tableName="Content_Authority" columnName="authorities_KEY"/>
    </changeSet>
    <changeSet id="2011-09-05_17" author="ben">
      <dropColumn tableName="Distribution_Authority" columnName="authorities_KEY"/>
    </changeSet>
    <changeSet id="2011-09-05_18" author="ben">
      <dropColumn tableName="Image_Authority" columnName="authorities_KEY"/>
    </changeSet>
    <changeSet id="2011-09-05_19" author="ben">
      <dropColumn tableName="Reference_Authority" columnName="authorities_KEY"/>
    </changeSet>
    <changeSet id="2011-09-05_20" author="ben">
      <dropColumn tableName="Taxon_Authority" columnName="authorities_KEY"/>
    </changeSet>
    <changeSet id="2011-09-05_21" author="ben">
      <dropForeignKeyConstraint constraintName="FK35CA12BD59FA9B5F" 
                               baseTableName="Content_Authority"/>
    </changeSet>
    <changeSet id="2011-09-05_22" author="ben">
      <dropForeignKeyConstraint constraintName="FK221AC748BFDB6E15" 
                               baseTableName="Distribution_Authority"/>
    </changeSet>
    <changeSet id="2011-09-05_23" author="ben">
      <dropForeignKeyConstraint constraintName="FK7800CD1F544A087" 
                               baseTableName="Image_Authority"/>
    </changeSet>
    <changeSet id="2011-09-05_24" author="ben">
      <dropForeignKeyConstraint constraintName="FK5B73C70F1914B32E" 
                               baseTableName="Reference_Authority"/>
    </changeSet>
    <changeSet id="2011-09-05_25" author="ben">
      <dropForeignKeyConstraint constraintName="FKA565F3CE1EDCD08D" 
                               baseTableName="Taxon_Authority"/>
    </changeSet>
    <changeSet id="2011-09-06_1" author="ben">
      <dropPrimaryKey tableName="Content_Authority"/>
    </changeSet>
    <changeSet id="2011-09-06_2" author="ben">
      <dropPrimaryKey tableName="Distribution_Authority"/>
    </changeSet>
    <changeSet id="2011-09-06_3" author="ben">
      <dropPrimaryKey tableName="Image_Authority"/>
    </changeSet>
    <changeSet id="2011-09-06_4" author="ben">
      <dropPrimaryKey tableName="Reference_Authority"/>
    </changeSet>
    <changeSet id="2011-09-06_5" author="ben">
      <dropPrimaryKey tableName="Taxon_Authority"/>
    </changeSet>
    <changeSet id="2011-09-06_6" author="ben">
      <addPrimaryKey tableName="Content_Authority" columnNames="Content_id,authorities_id"/>
    </changeSet>
    <changeSet id="2011-09-06_7" author="ben">
      <addPrimaryKey tableName="Distribution_Authority" columnNames="Distribution_id,authorities_id"/>
    </changeSet>
    <changeSet id="2011-09-06_8" author="ben">
      <addPrimaryKey tableName="Image_Authority" columnNames="Image_id,authorities_id"/>
    </changeSet>
    <changeSet id="2011-09-06_9" author="ben">
      <addPrimaryKey tableName="Reference_Authority" columnNames="Reference_id,authorities_id"/>
    </changeSet>
    <changeSet id="2011-09-06_10" author="ben">
      <addPrimaryKey tableName="Taxon_Authority" columnNames="Taxon_id,authorities_id"/>
    </changeSet>
    <changeSet id="2011-09-19_01" author="ben">
      <addForeignKeyConstraint constraintName="FK35CA12BD59FA9B5F" 
                               referencedTableName="Content"
                               baseColumnNames="Content_id"
                               baseTableName="Content_Authority"
                               referencedColumnNames="id"/>
    </changeSet>
    <changeSet id="2011-09-19_02" author="ben">
      <addForeignKeyConstraint constraintName="FK221AC748BFDB6E15" 
                               referencedTableName="Distribution"
                               baseColumnNames="Distribution_id"
                               baseTableName="Distribution_Authority"
                               referencedColumnNames="id"/>
    </changeSet>
    <changeSet id="2011-09-19_03" author="ben">
      <addForeignKeyConstraint constraintName="FK7800CD1F544A087" 
                               referencedTableName="Image"
                               baseColumnNames="Image_id"
                               baseTableName="Image_Authority"
                               referencedColumnNames="id"/>
    </changeSet>
    <changeSet id="2011-09-19_04" author="ben">
      <addForeignKeyConstraint constraintName="FK5B73C70F1914B32E" 
                               referencedTableName="Reference"
                               baseColumnNames="Reference_id"
                               baseTableName="Reference_Authority"
                               referencedColumnNames="id"/>
    </changeSet>
    <changeSet id="2011-09-19_05" author="ben">
      <addForeignKeyConstraint constraintName="FKA565F3CE1EDCD08D" 
                               referencedTableName="Taxon"
                               baseColumnNames="Taxon_id"
                               baseTableName="Taxon_Authority"
                               referencedColumnNames="id"/>
    </changeSet>
</databaseChangeLog>
