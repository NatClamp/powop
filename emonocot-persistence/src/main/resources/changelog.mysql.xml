<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd">
     <changeSet author="ben" id="1303384038461-1">
        <createTable tableName="BATCH_JOB_EXECUTION">
            <column name="JOB_EXECUTION_ID" type="BIGINT">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="VERSION" type="BIGINT"/>
            <column name="JOB_INSTANCE_ID" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="CREATE_TIME" type="DATETIME">
                <constraints nullable="false"/>
            </column>
            <column name="START_TIME" type="DATETIME"/>
            <column name="END_TIME" type="DATETIME"/>
            <column name="STATUS" type="VARCHAR(10)"/>
            <column name="EXIT_CODE" type="VARCHAR(100)"/>
            <column name="EXIT_MESSAGE" type="VARCHAR(2500)"/>
            <column name="LAST_UPDATED" type="DATETIME"/>
        </createTable>
    </changeSet>
    <changeSet author="ben" id="1303384038461-2">
        <createTable tableName="BATCH_JOB_EXECUTION_CONTEXT">
            <column name="JOB_EXECUTION_ID" type="BIGINT">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="SHORT_CONTEXT" type="VARCHAR(2500)">
                <constraints nullable="false"/>
            </column>
            <column name="SERIALIZED_CONTEXT" type="TEXT"/>
        </createTable>
    </changeSet>
    <changeSet author="ben" id="1303384038461-3">
        <createTable tableName="BATCH_JOB_EXECUTION_SEQ">
            <column name="ID" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="ben" id="1303384038461-4">
        <createTable tableName="BATCH_JOB_INSTANCE">
            <column name="JOB_INSTANCE_ID" type="BIGINT">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="VERSION" type="BIGINT"/>
            <column name="JOB_NAME" type="VARCHAR(100)">
                <constraints nullable="false"/>
            </column>
            <column name="JOB_KEY" type="VARCHAR(32)">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="ben" id="1303384038461-5">
        <createTable tableName="BATCH_JOB_PARAMS">
            <column name="JOB_INSTANCE_ID" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="TYPE_CD" type="VARCHAR(6)">
                <constraints nullable="false"/>
            </column>
            <column name="KEY_NAME" type="VARCHAR(100)">
                <constraints nullable="false"/>
            </column>
            <column name="STRING_VAL" type="VARCHAR(250)"/>
            <column name="DATE_VAL" type="DATETIME"/>
            <column name="LONG_VAL" type="BIGINT"/>
            <column name="DOUBLE_VAL" type="DOUBLE"/>
        </createTable>
    </changeSet>
    <changeSet author="ben" id="1303384038461-6">
        <createTable tableName="BATCH_JOB_SEQ">
            <column name="ID" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="ben" id="1303384038461-7">
        <createTable tableName="BATCH_STEP_EXECUTION">
            <column name="STEP_EXECUTION_ID" type="BIGINT">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="VERSION" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="STEP_NAME" type="VARCHAR(100)">
                <constraints nullable="false"/>
            </column>
            <column name="JOB_EXECUTION_ID" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="START_TIME" type="DATETIME">
                <constraints nullable="false"/>
            </column>
            <column name="END_TIME" type="DATETIME"/>
            <column name="STATUS" type="VARCHAR(10)"/>
            <column name="COMMIT_COUNT" type="BIGINT"/>
            <column name="READ_COUNT" type="BIGINT"/>
            <column name="FILTER_COUNT" type="BIGINT"/>
            <column name="WRITE_COUNT" type="BIGINT"/>
            <column name="READ_SKIP_COUNT" type="BIGINT"/>
            <column name="WRITE_SKIP_COUNT" type="BIGINT"/>
            <column name="PROCESS_SKIP_COUNT" type="BIGINT"/>
            <column name="ROLLBACK_COUNT" type="BIGINT"/>
            <column name="EXIT_CODE" type="VARCHAR(100)"/>
            <column name="EXIT_MESSAGE" type="VARCHAR(2500)"/>
            <column name="LAST_UPDATED" type="DATETIME"/>
        </createTable>
    </changeSet>
    <changeSet author="ben" id="1303384038461-8">
        <createTable tableName="BATCH_STEP_EXECUTION_CONTEXT">
            <column name="STEP_EXECUTION_ID" type="BIGINT">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="SHORT_CONTEXT" type="VARCHAR(2500)">
                <constraints nullable="false"/>
            </column>
            <column name="SERIALIZED_CONTEXT" type="TEXT"/>
        </createTable>
    </changeSet>
    <changeSet author="ben" id="1303384038461-9">
        <createTable tableName="BATCH_STEP_EXECUTION_SEQ">
            <column name="ID" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="ben" id="1303384038461-10">
        <addForeignKeyConstraint baseColumnNames="JOB_INSTANCE_ID" baseTableName="BATCH_JOB_EXECUTION" constraintName="JOB_INST_EXEC_FK" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="JOB_INSTANCE_ID" referencedTableName="BATCH_JOB_INSTANCE"/>
    </changeSet>
    <changeSet author="ben" id="1303384038461-11">
        <addForeignKeyConstraint baseColumnNames="JOB_EXECUTION_ID" baseTableName="BATCH_JOB_EXECUTION_CONTEXT" constraintName="JOB_EXEC_CTX_FK" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="JOB_EXECUTION_ID" referencedTableName="BATCH_JOB_EXECUTION"/>
    </changeSet>
    <changeSet author="ben" id="1303384038461-12">
        <addForeignKeyConstraint baseColumnNames="JOB_INSTANCE_ID" baseTableName="BATCH_JOB_PARAMS" constraintName="JOB_INST_PARAMS_FK" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="JOB_INSTANCE_ID" referencedTableName="BATCH_JOB_INSTANCE"/>
    </changeSet>
    <changeSet author="ben" id="1303384038461-13">
        <addForeignKeyConstraint baseColumnNames="JOB_EXECUTION_ID" baseTableName="BATCH_STEP_EXECUTION" constraintName="JOB_EXEC_STEP_FK" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="JOB_EXECUTION_ID" referencedTableName="BATCH_JOB_EXECUTION"/>
    </changeSet>
    <changeSet author="ben" id="1303384038461-14">
        <addForeignKeyConstraint baseColumnNames="STEP_EXECUTION_ID" baseTableName="BATCH_STEP_EXECUTION_CONTEXT" constraintName="STEP_EXEC_CTX_FK" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="STEP_EXECUTION_ID" referencedTableName="BATCH_STEP_EXECUTION"/>
    </changeSet>
    <changeSet author="ben" id="1303384038461-15">
        <createIndex indexName="JOB_INST_EXEC_IDX" tableName="BATCH_JOB_EXECUTION" unique="false">
            <column name="JOB_INSTANCE_ID"/>
        </createIndex>
    </changeSet>
    <changeSet author="ben" id="1303384038461-16">
        <createIndex indexName="JOB_EXECUTION_IDX" tableName="BATCH_JOB_EXECUTION" unique="true">
            <column name="JOB_EXECUTION_ID"/>
        </createIndex>
    </changeSet>
    <changeSet author="ben" id="1303384038461-17">
        <createIndex indexName="JOB_EXECUTION_CONTEXT_IDX" tableName="BATCH_JOB_EXECUTION_CONTEXT" unique="true">
            <column name="JOB_EXECUTION_ID"/>
        </createIndex>
    </changeSet>
    <changeSet author="ben" id="1303384038461-18">
        <createIndex indexName="JOB_INST_IDX" tableName="BATCH_JOB_INSTANCE" unique="true">
            <column name="JOB_NAME"/>
            <column name="JOB_KEY"/>
        </createIndex>
    </changeSet>
    <changeSet author="ben" id="1303384038461-19">
        <createIndex indexName="JOB_INSTANCE_IDX" tableName="BATCH_JOB_INSTANCE" unique="true">
            <column name="JOB_INSTANCE_ID"/>
        </createIndex>
    </changeSet>
    <changeSet author="ben" id="1303384038461-20">
        <createIndex indexName="JOB_INST_PARAMS_IDX" tableName="BATCH_JOB_PARAMS" unique="false">
            <column name="JOB_INSTANCE_ID"/>
        </createIndex>
    </changeSet>
    <changeSet author="ben" id="1303384038461-21">
        <createIndex indexName="JOB_EXEC_STEP_IDX" tableName="BATCH_STEP_EXECUTION" unique="false">
            <column name="JOB_EXECUTION_ID"/>
        </createIndex>
    </changeSet>
    <changeSet author="ben" id="1303384038461-22">
        <createIndex indexName="STEP_EXECUTION_IDX" tableName="BATCH_STEP_EXECUTION" unique="true">
            <column name="STEP_EXECUTION_ID"/>
        </createIndex>
    </changeSet>
    <changeSet author="ben" id="1303384038461-23">
        <createIndex indexName="STEP_EXECUTION_CONTEXT_IDX" tableName="BATCH_STEP_EXECUTION_CONTEXT" unique="true">
            <column name="STEP_EXECUTION_ID"/>
        </createIndex>
    </changeSet>
    <changeSet author="ben" id="1303384038461-24">
      <insert tableName="BATCH_STEP_EXECUTION_SEQ" >
        <column name="ID" valueNumeric="0"/>         
      </insert>
    </changeSet>
    <changeSet author="ben" id="1303384038461-25">
      <insert tableName="BATCH_JOB_EXECUTION_SEQ" >
        <column name="ID" valueNumeric="0"/>         
      </insert>
    </changeSet>
    <changeSet author="ben" id="1303384038461-26">
      <insert tableName="BATCH_JOB_SEQ" >
        <column name="ID" valueNumeric="0"/>         
      </insert>
    </changeSet>
    <changeSet author="ben" id="2011-05-25_1">
       <createTable tableName="Content">
            <column name="id" type="bigint">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="DTYPE" type="varchar(31)">
                <constraints nullable="false"/>
            </column>
            <column name="created" type="datetime"/>
            <column name="creator" type="varchar(255)"/>
            <column name="identifier" type="varchar(255)"/>
            <column name="license" type="varchar(255)"/>
            <column name="modified" type="datetime"/>
            <column name="source" type="varchar(255)"/>
            <column name="feature" type="varchar(255)"/>
            <column name="content" type="varchar(255)"/>
            <column name="taxon_id" type="bigint"/>
        </createTable>
    </changeSet>
    <changeSet author="ben" id="2011-05-25_2">
       <createTable tableName="Distribution">
            <column name="id" type="bigint">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="created" type="datetime"/>
            <column name="creator" type="varchar(255)"/>
            <column name="identifier" type="varchar(255)"/>
            <column name="license" type="varchar(255)"/>
            <column name="modified" type="datetime"/>
            <column name="source" type="varchar(255)"/>
            <column name="region" type="varchar(255)"/>
            <column name="taxon_id" type="bigint"/>
        </createTable>
    </changeSet>
    <changeSet author="ben" id="2011-05-25_3">
       <createTable tableName="Image">
            <column name="id" type="bigint">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="created" type="datetime"/>
            <column name="creator" type="varchar(255)"/>
            <column name="identifier" type="varchar(255)"/>
            <column name="license" type="varchar(255)"/>
            <column name="modified" type="datetime"/>
            <column name="source" type="varchar(255)"/>
            <column name="url" type="varchar(255)"/>
        </createTable>
    </changeSet>
    <changeSet author="ben" id="2011-05-25_4">
       <createTable tableName="Reference">
            <column name="id" type="bigint">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="DTYPE" type="varchar(31)">
                <constraints nullable="false"/>
            </column>
            <column name="created" type="datetime"/>
            <column name="creator" type="varchar(255)"/>
            <column name="identifier" type="varchar(255)"/>
            <column name="license" type="varchar(255)"/>
            <column name="modified" type="datetime"/>
            <column name="source" type="varchar(255)"/>
        </createTable>
    </changeSet>
    <changeSet author="ben" id="2011-05-25_5">
       <createTable tableName="Taxon">
            <column name="id" type="bigint">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="created" type="datetime"/>
            <column name="creator" type="varchar(255)"/>
            <column name="identifier" type="varchar(255)"/>
            <column name="license" type="varchar(255)"/>
            <column name="modified" type="datetime"/>
            <column name="source" type="varchar(255)"/>
            <column name="name" type="varchar(255)"/>
            <column name="accepted_id" type="bigint"/>
            <column name="parent_id" type="bigint"/>
        </createTable>
    </changeSet>
    <changeSet author="ben" id="2011-05-25_6">
       <createTable tableName="Taxon_Image">
            <column name="Taxon_id" type="bigint">
                <constraints nullable="false"/>
            </column>
            <column name="images_id" type="bigint">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="ben" id="2011-05-25_7">
       <createTable tableName="Taxon_Reference">
            <column name="Taxon_id" type="bigint">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="references_id" type="bigint">
                <constraints nullable="false" primaryKey="true"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="ben" id="2011-05-25_8">
        <addForeignKeyConstraint constraintName="FK9BEFCC591EDCD08D" baseTableName="Content" baseColumnNames="taxon_id"
           referencedTableName="Taxon" referencedColumnNames="id"
        />
    </changeSet>
    <changeSet author="ben" id="2011-05-25_9">
        <createIndex tableName="Content" indexName="Content_taxon_id_IDX">
          <column name="taxon_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="ben" id="2011-05-25_10">
        <addForeignKeyConstraint constraintName="FKAB93A2A41EDCD08D" baseTableName="Distribution" baseColumnNames="taxon_id"
           referencedTableName="Taxon" referencedColumnNames="id"
        />
    </changeSet>
    <changeSet author="ben" id="2011-05-25_11">
        <createIndex tableName="Distribution" indexName="Distribution_taxon_id_IDX">
          <column name="taxon_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="ben" id="2011-05-25_12">
        <addForeignKeyConstraint constraintName="FK4CD9EAA54493690" baseTableName="Taxon" baseColumnNames="accepted_id"
           referencedTableName="Taxon" referencedColumnNames="id"
        />
    </changeSet>
    <changeSet author="ben" id="2011-05-25_13">
        <createIndex tableName="Taxon" indexName="Taxon_accepted_id_IDX">
          <column name="accepted_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="ben" id="2011-05-25_14">
        <addForeignKeyConstraint constraintName="FK4CD9EAAA9E98AAD" baseTableName="Taxon" baseColumnNames="parent_id"
           referencedTableName="Taxon" referencedColumnNames="id"
        />
    </changeSet>
    <changeSet author="ben" id="2011-05-25_15">
        <createIndex tableName="Taxon" indexName="Taxon_parent_id_IDX">
          <column name="parent_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="ben" id="2011-05-25_16">
        <addForeignKeyConstraint constraintName="FK56D693661EDCD08D" baseTableName="Taxon_Image" baseColumnNames="Taxon_id"
           referencedTableName="Taxon" referencedColumnNames="id"
        />
    </changeSet>
    <changeSet author="ben" id="2011-05-25_17">
        <createIndex tableName="Taxon_Image" indexName="Taxon_Image_Taxon_id_IDX">
          <column name="Taxon_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="ben" id="2011-05-25_18">
        <addForeignKeyConstraint constraintName="FK56D69366437564A" baseTableName="Taxon_Image" baseColumnNames="images_id"
           referencedTableName="Image" referencedColumnNames="id"
        />
    </changeSet>
    <changeSet author="ben" id="2011-05-25_19">
        <createIndex tableName="Taxon_Image" indexName="Taxon_Image_images_id_IDX">
          <column name="images_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="ben" id="2011-05-25_20">
        <addForeignKeyConstraint constraintName="FK164D2BD6968322D1" baseTableName="Taxon_Reference" baseColumnNames="references_id"
           referencedTableName="Reference" referencedColumnNames="id"
        />
    </changeSet>
    <changeSet author="ben" id="2011-05-25_21">
        <createIndex tableName="Taxon_Reference" indexName="Taxon_Reference_references_id_IDX">
          <column name="references_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="ben" id="2011-05-25_22">
        <addForeignKeyConstraint constraintName="FK164D2BD61EDCD08D" baseTableName="Taxon_Reference" baseColumnNames="Taxon_id"
           referencedTableName="Taxon" referencedColumnNames="id"
        />
    </changeSet>
    <changeSet author="ben" id="2011-05-25_23">
        <createIndex tableName="Taxon_Reference" indexName="Taxon_Reference_Taxon_id_IDX">
          <column name="Taxon_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="ben" id="2011-06-22_1">
      <createTable tableName="logging_event">
            <column name="event_id" type="bigint" autoIncrement="true">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="timestmp" type="bigint">
                <constraints nullable="false"/>
            </column>
            <column name="formatted_message" type="text">
                <constraints nullable="false"/>
            </column>
            <column name="logger_name" type="varchar(254)">
                <constraints nullable="false"/>
            </column>
            <column name="level_string" type="varchar(254)">
                <constraints nullable="false"/>
            </column>
            <column name="thread_name" type="varchar(254)"/>
            <column name="reference_flag" type="smallint"/>
            <column name="arg0" type="varchar(254)"/>
            <column name="arg1" type="varchar(254)"/>
            <column name="arg2" type="varchar(254)"/>
            <column name="arg3" type="varchar(254)"/>
            <column name="caller_filename" type="varchar(254)">
                <constraints nullable="false"/>
            </column>
            <column name="caller_class" type="varchar(254)">
                <constraints nullable="false"/>
            </column>
            <column name="caller_method" type="varchar(254)">
                <constraints nullable="false"/>
            </column>
            <column name="caller_line" type="char(4)">
                <constraints nullable="false"/>
            </column>
      </createTable>
    </changeSet>
    <changeSet author="ben" id="2011-06-22_2">
      <createTable tableName="logging_event_property">
            <column name="event_id" type="bigint">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="mapped_key" type="varchar(254)">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="mapped_value" type="text"/>
      </createTable>
    </changeSet>
    <changeSet author="ben" id="2011-06-22_3">
      <createTable tableName="logging_event_exception">
            <column name="event_id" type="bigint">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="i" type="smallint">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="trace_line" type="varchar(254)">
              <constraints nullable="false"/>
            </column>
      </createTable>
    </changeSet>
    <changeSet author="ben" id="2011-06-22_4">
        <addForeignKeyConstraint constraintName="FK_logging_event_property_logging_event" baseTableName="logging_event_property" baseColumnNames="event_id"
           referencedTableName="logging_event" referencedColumnNames="event_id"
        />
    </changeSet>
    <changeSet author="ben" id="2011-06-22_5">
        <addForeignKeyConstraint constraintName="FK_logging_event_exception_logging_event" baseTableName="logging_event_exception" baseColumnNames="event_id"
           referencedTableName="logging_event" referencedColumnNames="event_id"
        />
    </changeSet>
    <changeSet author="ben" id="2011-07-28_1">
      <addColumn tableName="Taxon">
        <column name="authorship" type="varchar(255)"/>
      </addColumn>
    </changeSet>
    <changeSet author="ben" id="2011-07-28_2">
      <addColumn tableName="Taxon">
        <column name="basionymAuthorship" type="varchar(255)"/>
      </addColumn>
    </changeSet>
    <changeSet author="ben" id="2011-07-28_3">
      <addColumn tableName="Taxon">
        <column name="uninomial" type="varchar(255)"/>
      </addColumn>
    </changeSet>
    <changeSet author="ben" id="2011-07-28_4">
      <addColumn tableName="Taxon">
        <column name="genus" type="varchar(255)"/>
      </addColumn>
    </changeSet>
    <changeSet author="ben" id="2011-07-28_5">
      <addColumn tableName="Taxon">
        <column name="specificEpithet" type="varchar(255)"/>
      </addColumn>
    </changeSet>
    <changeSet author="ben" id="2011-07-28_6">
      <addColumn tableName="Taxon">
        <column name="infraspecificEpithet" type="varchar(255)"/>
      </addColumn>
    </changeSet>
    <changeSet author="ben" id="2011-07-28_7">
      <addColumn tableName="Taxon">
        <column name="rank" type="varchar(255)"/>
      </addColumn>
    </changeSet>
    <changeSet author="ben" id="2011-08-12_1">
      <addColumn tableName="Taxon">
        <column name="accordingTo" type="varchar(255)"/>
      </addColumn>
    </changeSet>
    <changeSet author="ben" id="2011-08-12_2">
      <addColumn tableName="Taxon">
        <column name="family" type="varchar(255)"/>
      </addColumn>
    </changeSet>
    <changeSet author="ben" id="2011-08-12_3">
      <addColumn tableName="Taxon">
        <column name="infraGenericEpithet" type="varchar(255)"/>
      </addColumn>
    </changeSet>
    <changeSet author="ben" id="2011-08-12_4">
      <addColumn tableName="Taxon">
        <column name="kingdom" type="varchar(255)"/>
      </addColumn>
    </changeSet>
    <changeSet author="ben" id="2011-08-12_5">
      <addColumn tableName="Taxon">
        <column name="nomenclaturalCode" type="varchar(255)"/>
      </addColumn>
    </changeSet>
    <changeSet author="ben" id="2011-08-12_6">
      <addColumn tableName="Taxon">
        <column name="ordr" type="varchar(255)"/>
      </addColumn>
    </changeSet>
    <changeSet author="ben" id="2011-08-12_7">
      <addColumn tableName="Taxon">
        <column name="phylum" type="varchar(255)"/>
      </addColumn>
    </changeSet>
    <changeSet author="ben" id="2011-08-12_8">
      <addColumn tableName="Taxon">
        <column name="status" type="varchar(255)"/>
      </addColumn>
    </changeSet>
    <changeSet author="ben" id="2011-08-12_9">
      <createTable tableName="Annotation">
            <column name="id" type="bigint" autoIncrement="true">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="annotatedObjId" type="bigint"/>
            <column name="annotatedObjType" type="varchar(255)"/>
            <column name="code" type="varchar(255)"/>
            <column name="jobId" type="bigint"/>
            <column name="present" type="boolean" defaultValueBoolean="false">
              <constraints nullable="false"/>
            </column>
            <column name="text" type="varchar(255)"/>
      </createTable>
    </changeSet>
    <changeSet author="ben" id="2011-08-18_1">
      <modifyDataType tableName="Content" columnName="content" newDataType="longtext"/>
    </changeSet>
    <changeSet author="ben" id="2011-08-18_2">
      <modifyDataType tableName="Annotation" columnName="text" newDataType="longtext"/>      
    </changeSet>
    <changeSet author="ben" id="2011-08-18_3">
      <addColumn tableName="Image">
        <column name="caption" type="varchar(255)"/>
      </addColumn> 
    </changeSet>
    <changeSet author="jk00kg" id="2011-08-19_1">
      <addColumn tableName="Image">
        <column name="taxon_id" type="bigint"/>
      </addColumn> 
    </changeSet>
    <changeSet author="ben" id="2011-08-26_1">
      <addColumn tableName="Reference">
        <column name="datePublished" type="varchar(255)"/>
      </addColumn> 
    </changeSet>
    <changeSet author="ben" id="2011-08-26_2">
      <addColumn tableName="Reference">
        <column name="pages" type="varchar(255)"/>
      </addColumn> 
    </changeSet>
    <changeSet author="ben" id="2011-08-26_3">
      <addColumn tableName="Reference">
        <column name="title" type="varchar(255)"/>
      </addColumn> 
    </changeSet>
    <changeSet author="ben" id="2011-08-26_4">
      <addColumn tableName="Reference">
        <column name="volume" type="varchar(255)"/>
      </addColumn> 
    </changeSet>
    <changeSet author="ben" id="2011-08-26_5">
      <addColumn tableName="Reference">
        <column name="type" type="integer"/>
      </addColumn> 
    </changeSet>
    <changeSet author="ben" id="2011-08-26_7">
      <addColumn tableName="Taxon">
        <column name="protologue_id" type="bigint"/>
      </addColumn> 
    </changeSet>
    <changeSet author="ben" id="2011-08-26_8">
        <addForeignKeyConstraint baseColumnNames="protologue_id" baseTableName="Taxon" constraintName="FK4CD9EAACA0AED" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="Reference"/>
    </changeSet>
    <changeSet author="ben" id="2011-08-26_9">
        <createIndex indexName="Taxon_protologue_IDX" tableName="Taxon" unique="false">
            <column name="protologue_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="ben" id="2011-08-26_10">
        <dropColumn tableName="Reference" columnName="DTYPE"/>
    </changeSet>
    <changeSet id="2011-08-31_1" author="ben">
      <addColumn tableName="Annotation">
        <column name="dateTime" type="integer"/>
      </addColumn>
    </changeSet>
    <changeSet id="2011-08-31_2" author="ben">
      <addColumn tableName="Annotation">
        <column name="type" type="varchar(255)"/>
      </addColumn>
    </changeSet>
    <changeSet id="2011-08-31_3" author="ben">
      <addColumn tableName="Annotation">
        <column name="authority_id" type="bigint"/>
      </addColumn>
    </changeSet>
    <changeSet id="2011-08-31_4" author="ben">
      <createTable tableName="Authority">
          <column name="id" type="bigint" autoIncrement="true">
            <constraints nullable="false" primaryKey="true"/>
          </column>
          <column name="name" type="varchar(255)"/>
          <column name="uri" type="varchar(255)"/>
      </createTable>
    </changeSet>
    <changeSet id="2011-08-31_5" author="ben">
      <createTable tableName="Content_Authority">
          <column name="Content_id" type="bigint">
            <constraints nullable="false" primaryKey="true"/>
          </column>
          <column name="authorities_id" type="bigint">
            <constraints nullable="false"/>
          </column>
          <column name="authorities_KEY" type="integer">
            <constraints nullable="false" primaryKey="true"/>
          </column>
      </createTable>
    </changeSet>
    <changeSet id="2011-08-31_6" author="ben">
      <createTable tableName="Distribution_Authority">
          <column name="Distribution_id" type="bigint">
            <constraints nullable="false" primaryKey="true"/>
          </column>
          <column name="authorities_id" type="bigint">
            <constraints nullable="false"/>
          </column>
          <column name="authorities_KEY" type="integer">
            <constraints nullable="false" primaryKey="true"/>
          </column>
      </createTable>
    </changeSet>
    <changeSet id="2011-08-31_7" author="ben">
      <createTable tableName="Image_Authority">
          <column name="Image_id" type="bigint">
            <constraints nullable="false" primaryKey="true"/>
          </column>
          <column name="authorities_id" type="bigint">
            <constraints nullable="false"/>
          </column>
          <column name="authorities_KEY" type="integer">
            <constraints nullable="false" primaryKey="true"/>
          </column>
      </createTable>
    </changeSet>
    <changeSet id="2011-08-31_8" author="ben">
      <createTable tableName="Reference_Authority">
          <column name="Reference_id" type="bigint">
            <constraints nullable="false" primaryKey="true"/>
          </column>
          <column name="authorities_id" type="bigint">
            <constraints nullable="false"/>
          </column>
          <column name="authorities_KEY" type="integer">
            <constraints nullable="false" primaryKey="true"/>
          </column>
      </createTable>
    </changeSet>
    <changeSet id="2011-08-31_9" author="ben">
      <createTable tableName="Taxon_Authority">
          <column name="Taxon_id" type="bigint">
            <constraints nullable="false" primaryKey="true"/>
          </column>
          <column name="authorities_id" type="bigint">
            <constraints nullable="false"/>
          </column>
          <column name="authorities_KEY" type="integer">
            <constraints nullable="false" primaryKey="true"/>
          </column>
      </createTable>
    </changeSet>
    <changeSet id="2011-08-31_10" author="ben">
      <addForeignKeyConstraint constraintName="FK35CA12BD59FA9B5F" 
                               referencedTableName="Content"
                               baseColumnNames="Content_id"
                               baseTableName="Content_Authority"
                               referencedColumnNames="id"/>
    </changeSet>
    <changeSet id="2011-08-31_11" author="ben">
      <addForeignKeyConstraint constraintName="FK35CA12BD2AFF4188" 
                               referencedTableName="Authority"
                               baseColumnNames="authorities_id"
                               baseTableName="Content_Authority"
                               referencedColumnNames="id"/>
    </changeSet>
    <changeSet id="2011-08-31_12" author="ben">
      <addForeignKeyConstraint constraintName="FK221AC748BFDB6E15" 
                               referencedTableName="Distribution"
                               baseColumnNames="Distribution_id"
                               baseTableName="Distribution_Authority"
                               referencedColumnNames="id"/>
    </changeSet>
    <changeSet id="2011-08-31_13" author="ben">
      <addForeignKeyConstraint constraintName="FK221AC7482AFF4188" 
                               referencedTableName="Authority"
                               baseColumnNames="authorities_id"
                               baseTableName="Distribution_Authority"
                               referencedColumnNames="id"/>
    </changeSet>
    <changeSet id="2011-08-31_14" author="ben">
      <addForeignKeyConstraint constraintName="FK7800CD1F544A087" 
                               referencedTableName="Image"
                               baseColumnNames="Image_id"
                               baseTableName="Image_Authority"
                               referencedColumnNames="id"/>
    </changeSet>
    <changeSet id="2011-08-31_15" author="ben">
      <addForeignKeyConstraint constraintName="FK7800CD1F2AFF4188" 
                               referencedTableName="Authority"
                               baseColumnNames="authorities_id"
                               baseTableName="Image_Authority"
                               referencedColumnNames="id"/>
    </changeSet>
    <changeSet id="2011-08-31_16" author="ben">
      <addForeignKeyConstraint constraintName="FK5B73C70F1914B32E" 
                               referencedTableName="Reference"
                               baseColumnNames="Reference_id"
                               baseTableName="Reference_Authority"
                               referencedColumnNames="id"/>
    </changeSet>
    <changeSet id="2011-08-31_17" author="ben">
      <addForeignKeyConstraint constraintName="FK5B73C70F2AFF4188" 
                               referencedTableName="Authority"
                               baseColumnNames="authorities_id"
                               baseTableName="Reference_Authority"
                               referencedColumnNames="id"/>
    </changeSet>
    <changeSet id="2011-08-31_18" author="ben">
      <addForeignKeyConstraint constraintName="FKA565F3CE1EDCD08D" 
                               referencedTableName="Taxon"
                               baseColumnNames="Taxon_id"
                               baseTableName="Taxon_Authority"
                               referencedColumnNames="id"/>
    </changeSet>
    <changeSet id="2011-08-31_19" author="ben">
      <addForeignKeyConstraint constraintName="FKA565F3CE2AFF4188" 
                               referencedTableName="Authority"
                               baseColumnNames="authorities_id"
                               baseTableName="Taxon_Authority"
                               referencedColumnNames="id"/>
    </changeSet>
    <changeSet id="2011-08-31_20" author="ben">
      <addForeignKeyConstraint constraintName="FK1A21C74F92954226" 
                               referencedTableName="Authority"
                               baseColumnNames="authority_id"
                               baseTableName="Annotation"
                               referencedColumnNames="id"/>
    </changeSet>
    <changeSet id="2011-08-31_21" author="ben">
      <insert tableName="Authority">
        <column name="id" valueNumeric="1"/>
        <column name="name" value="WCS"/>
        <column name="uri" value="http://apps.kew.org/wcsTaxonExtractor/oai"/>
      </insert>
    </changeSet>
    <changeSet id="2011-08-31_22" author="ben">
      <insert tableName="Authority">
        <column name="id" valueNumeric="2"/>
        <column name="name" value="PalmWeb"/>
        <column name="uri" value="http://www.palmweb.org/archive.zip"/>
      </insert>
    </changeSet>
    <changeSet id="2011-08-31_23" author="ben">
      <createTable tableName="Time">
          <column name="id" type="bigint">
            <constraints nullable="false" primaryKey="true"/>
          </column>
          <column name="year" type="int(11)">
            <constraints nullable="false"/>
          </column>
          <column name="quarter" type="int(11)">
            <constraints nullable="false"/>
          </column>
          <column name="month" type="int(11)">
            <constraints nullable="false"/>
          </column>
          <column name="month_name" type="varchar(10)">
            <constraints nullable="false"/>
          </column>
          <column name="week" type="int(11)">
            <constraints nullable="false"/>
          </column>
          <column name="day" type="int(11)">
            <constraints nullable="false"/>
          </column>
          <column name="day_name" type="varchar(10)">
            <constraints nullable="false"/>
          </column>
      </createTable>
    </changeSet>
    <changeSet id="2011-08-31_24" author="ben">
      <sql>
        DROP PROCEDURE IF EXISTS populateDate;
      </sql>
    </changeSet>
    <changeSet id="2011-08-31_25" author="ben">
      <createProcedure>
        CREATE PROCEDURE populateDate()
        BEGIN          
          DECLARE dt DATE;
          SET @i = 0;
          REPEAT
            SET dt = adddate('2011-08-01',@i);
            INSERT INTO Time VALUES (datediff(dt,'2011-08-01'),year(dt),quarter(dt),month(dt),monthname(dt),week(dt),weekday(dt),dayname(dt));
            SET @i = @i + 1;
            UNTIL @i > 365
          END REPEAT;
        END;
      </createProcedure>        
    </changeSet>
    <changeSet id="2011-08-31_26" author="ben">
      <sql>
        call populateDate();
      </sql>        
    </changeSet>
    <changeSet id="2011-09-01_1" author="ben">
      <dropColumn tableName="Annotation" columnName="present"/>
    </changeSet>
    <changeSet id="2011-09-01_2" author="ben">
      <createTable tableName="Region">
          <column name="id" type="varchar(3)">
            <constraints nullable="false" primaryKey="true"/>
          </column>
          <column name="country" type="varchar(32)">
            <constraints nullable="false"/>
          </column>
          <column name="region" type="varchar(32)">
            <constraints nullable="false"/>
          </column>
          <column name="continent" type="varchar(16)">
            <constraints nullable="false"/>
          </column>
      </createTable>
    </changeSet>
    <changeSet id="2011-09-01_3" author="ben">
        <loadData tableName="Region" file="../emonocot-persistence/src/main/resources/regions.csv">
            <column name="id" index="0" type="STRING"/>
            <column name="country" index="1" type="STRING"/>
            <column name="region" index="2" type="STRING"/>
            <column name="continent" index="3" type="STRING"/>
        </loadData>
    </changeSet>
    <changeSet id="2011-09-04_1" author="ben">
      <addColumn tableName="Reference">
        <column name="author" type="varchar(255)"/>
      </addColumn>
    </changeSet>
    <changeSet id="2011-09-04_2" author="ben">
      <addColumn tableName="Reference">
        <column name="citation" type="varchar(255)"/>
      </addColumn>
    </changeSet>
    <changeSet id="2011-09-04_3" author="ben">
      <addColumn tableName="Reference">
        <column name="publishedIn" type="varchar(255)"/>
      </addColumn>
    </changeSet>
    <changeSet id="2011-09-05_1" author="ben">
      <addColumn tableName="Content">
        <column name="authority_id" type="bigint"/>
      </addColumn>
    </changeSet>
    <changeSet id="2011-09-05_2" author="ben">
      <addColumn tableName="Distribution">
        <column name="authority_id" type="bigint"/>
      </addColumn>
    </changeSet>
    <changeSet id="2011-09-05_3" author="ben">
      <addColumn tableName="Image">
        <column name="authority_id" type="bigint"/>
      </addColumn>
    </changeSet>
    <changeSet id="2011-09-05_4" author="ben">
      <addColumn tableName="Reference">
        <column name="authority_id" type="bigint"/>
      </addColumn>
    </changeSet>
    <changeSet id="2011-09-05_5" author="ben">
      <addColumn tableName="Taxon">
        <column name="authority_id" type="bigint"/>
      </addColumn>
    </changeSet>
    <changeSet id="2011-09-05_6" author="ben">
      <addForeignKeyConstraint constraintName="FK9BEFCC5992954226" 
                               referencedTableName="Authority"
                               baseColumnNames="authority_id"
                               baseTableName="Content"
                               referencedColumnNames="id"/>
    </changeSet>
    <changeSet id="2011-09-05_7" author="ben">
      <addForeignKeyConstraint constraintName="FKAB93A2A492954226" 
                               referencedTableName="Authority"
                               baseColumnNames="authority_id"
                               baseTableName="Distribution"
                               referencedColumnNames="id"/>
    </changeSet>
    <changeSet id="2011-09-05_8" author="ben">
      <addForeignKeyConstraint constraintName="FK437B93B92954226" 
                               referencedTableName="Authority"
                               baseColumnNames="authority_id"
                               baseTableName="Image"
                               referencedColumnNames="id"/>
    </changeSet>
    <changeSet id="2011-09-05_9" author="ben">
      <addForeignKeyConstraint constraintName="FK404D5F2B92954226" 
                               referencedTableName="Authority"
                               baseColumnNames="authority_id"
                               baseTableName="Reference"
                               referencedColumnNames="id"/>
    </changeSet>
    <changeSet id="2011-09-05_10" author="ben">
      <addForeignKeyConstraint constraintName="FK4CD9EAA92954226" 
                               referencedTableName="Authority"
                               baseColumnNames="authority_id"
                               baseTableName="Taxon"
                               referencedColumnNames="id"/>
    </changeSet>
    <changeSet id="2011-09-05_11" author="ben">
      <sql>
        update Content left join Content_Authority on (Content.id = Content_Authority.Content_id) set authority_id = Content_Authority.authorities_id where Content_Authority.authorities_KEY = 0;
      </sql>
    </changeSet>
    <changeSet id="2011-09-05_12" author="ben">
      <sql>
        update Distribution left join Distribution_Authority on (Distribution.id = Distribution_Authority.Distribution_id) set authority_id = Distribution_Authority.authorities_id where Distribution_Authority.authorities_KEY = 0;
      </sql>
    </changeSet>
    <changeSet id="2011-09-05_13" author="ben">
      <sql>
        update Image left join Image_Authority on (Image.id = Image_Authority.Image_id)  set authority_id = Image_Authority.authorities_id where Image_Authority.authorities_KEY = 0;
      </sql>
    </changeSet>
    <changeSet id="2011-09-05_14" author="ben">
      <sql>
        update Reference left join Reference_Authority on (Reference.id = Reference_Authority.Reference_id) set authority_id = Reference_Authority.authorities_id where Reference_Authority.authorities_KEY = 0;
      </sql>
    </changeSet>
    <changeSet id="2011-09-05_15" author="ben">
      <sql>
        update Taxon left join Taxon_Authority on (Taxon.id = Taxon_Authority.Taxon_id) set authority_id = Taxon_Authority.authorities_id where Taxon_Authority.authorities_KEY = 0;
      </sql>
    </changeSet>
    <changeSet id="2011-09-05_16" author="ben">
      <dropColumn tableName="Content_Authority" columnName="authorities_KEY"/>
    </changeSet>
    <changeSet id="2011-09-05_17" author="ben">
      <dropColumn tableName="Distribution_Authority" columnName="authorities_KEY"/>
    </changeSet>
    <changeSet id="2011-09-05_18" author="ben">
      <dropColumn tableName="Image_Authority" columnName="authorities_KEY"/>
    </changeSet>
    <changeSet id="2011-09-05_19" author="ben">
      <dropColumn tableName="Reference_Authority" columnName="authorities_KEY"/>
    </changeSet>
    <changeSet id="2011-09-05_20" author="ben">
      <dropColumn tableName="Taxon_Authority" columnName="authorities_KEY"/>
    </changeSet>
    <changeSet id="2011-09-05_21" author="ben">
      <dropForeignKeyConstraint constraintName="FK35CA12BD59FA9B5F" 
                               baseTableName="Content_Authority"/>
    </changeSet>
    <changeSet id="2011-09-05_22" author="ben">
      <dropForeignKeyConstraint constraintName="FK221AC748BFDB6E15" 
                               baseTableName="Distribution_Authority"/>
    </changeSet>
    <changeSet id="2011-09-05_23" author="ben">
      <dropForeignKeyConstraint constraintName="FK7800CD1F544A087" 
                               baseTableName="Image_Authority"/>
    </changeSet>
    <changeSet id="2011-09-05_24" author="ben">
      <dropForeignKeyConstraint constraintName="FK5B73C70F1914B32E" 
                               baseTableName="Reference_Authority"/>
    </changeSet>
    <changeSet id="2011-09-05_25" author="ben">
      <dropForeignKeyConstraint constraintName="FKA565F3CE1EDCD08D" 
                               baseTableName="Taxon_Authority"/>
    </changeSet>
    <changeSet id="2011-09-06_1" author="ben">
      <dropPrimaryKey tableName="Content_Authority"/>
    </changeSet>
    <changeSet id="2011-09-06_2" author="ben">
      <dropPrimaryKey tableName="Distribution_Authority"/>
    </changeSet>
    <changeSet id="2011-09-06_3" author="ben">
      <dropPrimaryKey tableName="Image_Authority"/>
    </changeSet>
    <changeSet id="2011-09-06_4" author="ben">
      <dropPrimaryKey tableName="Reference_Authority"/>
    </changeSet>
    <changeSet id="2011-09-06_5" author="ben">
      <dropPrimaryKey tableName="Taxon_Authority"/>
    </changeSet>
    <changeSet id="2011-09-06_6" author="ben">
      <addPrimaryKey tableName="Content_Authority" columnNames="Content_id,authorities_id"/>
    </changeSet>
    <changeSet id="2011-09-06_7" author="ben">
      <addPrimaryKey tableName="Distribution_Authority" columnNames="Distribution_id,authorities_id"/>
    </changeSet>
    <changeSet id="2011-09-06_8" author="ben">
      <addPrimaryKey tableName="Image_Authority" columnNames="Image_id,authorities_id"/>
    </changeSet>
    <changeSet id="2011-09-06_9" author="ben">
      <addPrimaryKey tableName="Reference_Authority" columnNames="Reference_id,authorities_id"/>
    </changeSet>
    <changeSet id="2011-09-06_10" author="ben">
      <addPrimaryKey tableName="Taxon_Authority" columnNames="Taxon_id,authorities_id"/>
    </changeSet>
    <changeSet id="2011-09-19_01" author="ben">
      <addForeignKeyConstraint constraintName="FK35CA12BD59FA9B5F" 
                               referencedTableName="Content"
                               baseColumnNames="Content_id"
                               baseTableName="Content_Authority"
                               referencedColumnNames="id"/>
    </changeSet>
    <changeSet id="2011-09-19_02" author="ben">
      <addForeignKeyConstraint constraintName="FK221AC748BFDB6E15" 
                               referencedTableName="Distribution"
                               baseColumnNames="Distribution_id"
                               baseTableName="Distribution_Authority"
                               referencedColumnNames="id"/>
    </changeSet>
    <changeSet id="2011-09-19_03" author="ben">
      <addForeignKeyConstraint constraintName="FK7800CD1F544A087" 
                               referencedTableName="Image"
                               baseColumnNames="Image_id"
                               baseTableName="Image_Authority"
                               referencedColumnNames="id"/>
    </changeSet>
    <changeSet id="2011-09-19_04" author="ben">
      <addForeignKeyConstraint constraintName="FK5B73C70F1914B32E" 
                               referencedTableName="Reference"
                               baseColumnNames="Reference_id"
                               baseTableName="Reference_Authority"
                               referencedColumnNames="id"/>
    </changeSet>
    <changeSet id="2011-09-19_05" author="ben">
      <addForeignKeyConstraint constraintName="FKA565F3CE1EDCD08D" 
                               referencedTableName="Taxon"
                               baseColumnNames="Taxon_id"
                               baseTableName="Taxon_Authority"
                               referencedColumnNames="id"/>
    </changeSet>
    <changeSet id="2011-10-07_01a" author="ben">
      <dropForeignKeyConstraint baseTableName="Annotation" constraintName="FK1A21C74F92954226"/>
    </changeSet>
    <changeSet id="2011-10-07_01b" author="ben">
      <renameColumn tableName="Annotation" oldColumnName="authority_id" newColumnName="source_id" columnDataType="bigint"/>
    </changeSet>    
    <changeSet id="2011-10-07_02a" author="ben">
      <renameTable newTableName="Source" oldTableName="Authority"/>
    </changeSet>
    <changeSet id="2011-10-07_02b" author="ben">
      <addForeignKeyConstraint constraintName="FK1A21C74F92954226" 
                               referencedTableName="Source"
                               baseColumnNames="source_id"
                               baseTableName="Annotation"
                               referencedColumnNames="id"/>
    </changeSet>
    <changeSet id="2011-10-07_03" author="ben">
      <renameTable oldTableName="Content_Authority" newTableName="Content_Source"/>
    </changeSet>
    <changeSet id="2011-10-07_04" author="ben">
      <renameTable oldTableName="Distribution_Authority" newTableName="Distribution_Source"/>
    </changeSet>
    <changeSet id="2011-10-07_05" author="ben">
      <renameTable oldTableName="Image_Authority" newTableName="Image_Source"/>
    </changeSet>
    <changeSet id="2011-10-07_06" author="ben">
      <renameTable oldTableName="Reference_Authority" newTableName="Reference_Source"/>
    </changeSet>
    <changeSet id="2011-10-07_07" author="ben">
      <renameTable oldTableName="Taxon_Authority" newTableName="Taxon_Source"/>
    </changeSet>
    <changeSet id="2011-10-07_08a" author="ben">
      <dropForeignKeyConstraint baseTableName="Content_Source" constraintName="FK35CA12BD2AFF4188"/>
    </changeSet>    
    <changeSet id="2011-10-07_08b" author="ben">
      <renameColumn tableName="Content_Source" oldColumnName="authorities_id" newColumnName="sources_id" columnDataType="bigint"/>
    </changeSet>
    <changeSet id="2011-10-07_08c" author="ben">
      <addForeignKeyConstraint constraintName="FK35CA12BD2AFF4188" 
                               referencedTableName="Source"
                               baseColumnNames="sources_id"
                               baseTableName="Content_Source"
                               referencedColumnNames="id"/>
    </changeSet>
    <changeSet id="2011-10-07_09a" author="ben">
      <dropForeignKeyConstraint baseTableName="Distribution_Source" constraintName="FK221AC7482AFF4188"/>
    </changeSet>
    <changeSet id="2011-10-07_09b" author="ben">
      <renameColumn tableName="Distribution_Source" oldColumnName="authorities_id" newColumnName="sources_id" columnDataType="bigint"/>
    </changeSet>
    <changeSet id="2011-10-07_09c" author="ben">
      <addForeignKeyConstraint constraintName="FK221AC7482AFF4188" 
                               referencedTableName="Source"
                               baseColumnNames="sources_id"
                               baseTableName="Distribution_Source"
                               referencedColumnNames="id"/>
    </changeSet>
    <changeSet id="2011-10-07_10a" author="ben">
      <dropForeignKeyConstraint baseTableName="Image_Source" constraintName="FK7800CD1F2AFF4188"/>
    </changeSet>
    <changeSet id="2011-10-07_10b" author="ben">
      <renameColumn tableName="Image_Source" oldColumnName="authorities_id" newColumnName="sources_id" columnDataType="bigint"/>
    </changeSet>
    <changeSet id="2011-10-07_10c" author="ben">
      <addForeignKeyConstraint constraintName="FK7800CD1F2AFF4188" 
                               referencedTableName="Source"
                               baseColumnNames="sources_id"
                               baseTableName="Image_Source"
                               referencedColumnNames="id"/>
    </changeSet>
    <changeSet id="2011-10-07_11a" author="ben">
      <dropForeignKeyConstraint baseTableName="Reference_Source" constraintName="FK5B73C70F2AFF4188"/>
    </changeSet>
    <changeSet id="2011-10-07_11b" author="ben">
      <renameColumn tableName="Reference_Source" oldColumnName="authorities_id" newColumnName="sources_id" columnDataType="bigint"/>
    </changeSet>
    <changeSet id="2011-10-07_11c" author="ben">
      <addForeignKeyConstraint constraintName="FK5B73C70F2AFF4188" 
                               referencedTableName="Source"
                               baseColumnNames="sources_id"
                               baseTableName="Reference_Source"
                               referencedColumnNames="id"/>
    </changeSet>
    <changeSet id="2011-10-07_12a" author="ben">
      <dropForeignKeyConstraint baseTableName="Taxon_Source" constraintName="FKA565F3CE2AFF4188"/>
    </changeSet>
    <changeSet id="2011-10-07_12b" author="ben">
      <renameColumn tableName="Taxon_Source" oldColumnName="authorities_id" newColumnName="sources_id" columnDataType="bigint"/>
    </changeSet>
    <changeSet id="2011-10-07_12c" author="ben">
      <addForeignKeyConstraint constraintName="FKA565F3CE2AFF4188" 
                               referencedTableName="Source"
                               baseColumnNames="sources_id"
                               baseTableName="Taxon_Source"
                               referencedColumnNames="id"/>
    </changeSet>
    <changeSet id="2011-10-07_13" author="ben">
      <createTable tableName="Principal">
        <column name="id" type="bigint">
            <constraints nullable="false" primaryKey="true"/>
        </column>
        <column name="DTYPE" type="varchar(31)">
            <constraints nullable="false"/>
        </column>
        <column name="created" type="timestamp"/>
        <column name="identifier" type="varchar(255)">
            <constraints unique="true"/>
        </column>
        <column name="modified" type="timestamp"/>
        <column name="accountNonExpired" type="boolean"/>
        <column name="accountNonLocked" type="boolean"/>
        <column name="credentialsNonExpired" type="boolean"/>
        <column name="enabled" type="boolean"/>
        <column name="password" type="varchar(255)"/>
      </createTable>
    </changeSet>
    <changeSet id="2011-10-07_14" author="ben">
      <createTable tableName="User_permissions">
        <column name="User_id" type="bigint">
            <constraints nullable="false"/>
        </column>
        <column name="permissions" type="integer"/>      
      </createTable>
    </changeSet>
    <changeSet id="2011-10-07_15" author="ben">
      <addForeignKeyConstraint constraintName="FKB4582A309E0AAB54" 
                               referencedTableName="Principal"
                               baseColumnNames="User_id"
                               baseTableName="User_permissions"
                               referencedColumnNames="id"/>
    </changeSet>
    <changeSet id="2011-10-10_01" author="ben">
       <createTable tableName="Group_permissions">
        <column name="Group_id" type="bigint">
            <constraints nullable="false"/>
        </column>
        <column name="permissions" type="integer"/>      
      </createTable>
    </changeSet>
    <changeSet id="2011-10-10_02" author="ben">
      <addForeignKeyConstraint constraintName="FK7A63C2A45090CB20" 
                               referencedTableName="Principal"
                               baseColumnNames="Group_id"
                               baseTableName="Group_permissions"
                               referencedColumnNames="id"/>
    </changeSet>
    <changeSet id="2011-10-10_03" author="ben">
       <createTable tableName="User_Group">
        <column name="User_id" type="bigint">
            <constraints nullable="false" primaryKey="true"/>
        </column>
        <column name="groups_id" type="bigint">
            <constraints nullable="false" primaryKey="true"/>
        </column>      
      </createTable>
    </changeSet>
    <changeSet id="2011-10-10_04" author="ben">
      <addForeignKeyConstraint constraintName="FKE7B7ED0B9E0AAB54" 
                               referencedTableName="Principal"
                               baseColumnNames="User_id"
                               baseTableName="User_Group"
                               referencedColumnNames="id"/>
    </changeSet>
    <changeSet id="2011-10-10_05" author="ben">
      <addForeignKeyConstraint constraintName="FKE7B7ED0BDA0BABAB" 
                               referencedTableName="Principal"
                               baseColumnNames="groups_id"
                               baseTableName="User_Group"
                               referencedColumnNames="id"/>
    </changeSet>
    <changeSet id="2011-10-11_01" author="ben">
      <modifyDataType tableName="Principal" columnName="created" newDataType="datetime"/>
    </changeSet>
    <changeSet id="2011-10-11_02" author="ben">
      <modifyDataType tableName="Principal" columnName="modified" newDataType="datetime"/>
    </changeSet>
    <changeSet id="2011-10-11_03" author="ben">
      <insert tableName="Principal">
        <column name="id" valueNumeric="1"/>
        <column name="DTYPE" value="Group"/>
        <column name="identifier" value="administrators"/>
      </insert>
    </changeSet>    
    <changeSet id="2011-10-11_04" author="ben">
      <insert tableName="Group_permissions">
        <column name="Group_id" valueNumeric="1"/>
        <column name="permissions" valueNumeric="0"/>
      </insert>
    </changeSet>
    <changeSet id="2011-10-11_05" author="ben">
      <insert tableName="Group_permissions">
        <column name="Group_id" valueNumeric="1"/>
        <column name="permissions" valueNumeric="1"/>
      </insert>
    </changeSet>
    <changeSet id="2011-10-11_06" author="ben">
      <insert tableName="Group_permissions">
        <column name="Group_id" valueNumeric="1"/>
        <column name="permissions" valueNumeric="2"/>
      </insert>
    </changeSet>
    <changeSet id="2011-10-11_07" author="ben">
      <insert tableName="Group_permissions">
        <column name="Group_id" valueNumeric="1"/>
        <column name="permissions" valueNumeric="3"/>
      </insert>
    </changeSet>
    <changeSet id="2011-10-11_08" author="ben">
      <insert tableName="Group_permissions">
        <column name="Group_id" valueNumeric="1"/>
        <column name="permissions" valueNumeric="4"/>
      </insert>
    </changeSet>
    <changeSet id="2011-10-11_09" author="ben">
      <insert tableName="Group_permissions">
        <column name="Group_id" valueNumeric="1"/>
        <column name="permissions" valueNumeric="5"/>
      </insert>
    </changeSet>
    <changeSet id="2011-10-11_10" author="ben">
      <insert tableName="Principal">
        <column name="id" valueNumeric="2"/>
        <column name="DTYPE" value="User"/>
        <column name="identifier" value="test@e-monocot.org"/>
        <column name="accountNonExpired" valueNumeric="1"/>
        <column name="accountNonLocked" valueNumeric="1"/>
        <column name="credentialsNonExpired" valueNumeric="1"/>
        <column name="enabled" valueNumeric="1"/>
        <column name="password" value="ada198e0c75ddbc7522da986598e57de"/>
      </insert>
    </changeSet>
    <changeSet id="2011-10-11_11" author="ben">
      <insert tableName="User_Group">
        <column name="User_id" valueNumeric="2"/>
        <column name="groups_id" valueNumeric="1"/>
      </insert>
    </changeSet>
    <changeSet id="2011-10-14_01" author="ben">
      <insert tableName="Group_permissions">
        <column name="Group_id" valueNumeric="1"/>
        <column name="permissions" valueNumeric="6"/>
      </insert>
    </changeSet>
    <changeSet id="2011-10-14_02" author="ben">
      <insert tableName="Group_permissions">
        <column name="Group_id" valueNumeric="1"/>
        <column name="permissions" valueNumeric="7"/>
      </insert>
    </changeSet>
    <changeSet id="2011-10-14_03" author="ben">
      <insert tableName="Group_permissions">
        <column name="Group_id" valueNumeric="1"/>
        <column name="permissions" valueNumeric="8"/>
      </insert>
    </changeSet>
    <changeSet id="2011-10-14_04" author="ben">
      <insert tableName="Group_permissions">
        <column name="Group_id" valueNumeric="1"/>
        <column name="permissions" valueNumeric="9"/>
      </insert>
    </changeSet>
    <changeSet id="2011-10-18_01" author="annapaola">
      <renameColumn tableName="Source" oldColumnName="name" newColumnName="identifier" columnDataType="varchar(255)"/>
    </changeSet>
    <changeSet id="2011-10-19_01" author="ben">
      <insert tableName="Source">
        <column name="id" valueNumeric="3"/>
        <column name="identifier" value="CATE-Araceae"/>
        <column name="uri" value="http://www.cate-araceae.org/checklist.zip"/>
      </insert>
    </changeSet>
    <changeSet id="2011-10-20_01" author="ben">
      <addColumn tableName="Taxon">
        <column name="protologueMicroReference" type="varchar(255)"/>
      </addColumn>
    </changeSet>
    <changeSet id="2011-10-25_01" author="ben">
      <addColumn tableName="Annotation">
        <column name="identifier" type="varchar(255)"/>
      </addColumn>
    </changeSet>
    <changeSet id="2011-10-25_02" author="ben">
      <sql>update Annotation set identifier = UUID() where identifier is null</sql>
    </changeSet>
    <changeSet id="2011-10-27_01" author="ben">
      <insert tableName="Group_permissions">
        <column name="Group_id" valueNumeric="1"/>
        <column name="permissions" valueNumeric="10"/>
      </insert>
    </changeSet>
    <changeSet id="2011-10-27_02" author="ben">
      <insert tableName="Group_permissions">
        <column name="Group_id" valueNumeric="1"/>
        <column name="permissions" valueNumeric="11"/>
      </insert>
    </changeSet>
    <changeSet id="2011-10-27_03" author="ben">
      <insert tableName="Group_permissions">
        <column name="Group_id" valueNumeric="1"/>
        <column name="permissions" valueNumeric="12"/>
      </insert>
    </changeSet>
    <changeSet id="2011-10-27_04" author="ben">
      <addColumn tableName="Source">
        <column name="created" type="datetime"/>
      </addColumn>
    </changeSet>
    <changeSet id="2011-10-27_05" author="ben">
      <addColumn tableName="Source">
        <column name="creator" type="varchar(255)"/>
      </addColumn>
    </changeSet>
    <changeSet id="2011-10-27_06" author="ben">
      <addColumn tableName="Source">
        <column name="license" type="varchar(255)"/>
      </addColumn>
    </changeSet>
    <changeSet id="2011-10-27_07" author="ben">
      <addColumn tableName="Source">
        <column name="modified" type="datetime"/>
      </addColumn>
    </changeSet>
    <changeSet id="2011-10-27_08" author="ben">
      <addColumn tableName="Source">
        <column name="source" type="varchar(255)"/>
      </addColumn>
    </changeSet>
    <changeSet id="2011-10-27_09" author="ben">
      <addColumn tableName="Source">
        <column name="authority_id" type="bigint"/>
      </addColumn>
    </changeSet>
    <changeSet id="2011-10-27_10" author="ben">
      <createTable tableName="Source_Source">
          <column name="Source_id" type="bigint">
            <constraints nullable="false" primaryKey="true"/>
          </column>
          <column name="sources_id" type="bigint">
            <constraints nullable="false"  primaryKey="true"/>
          </column>
      </createTable>
    </changeSet>
    <changeSet id="2011-10-27_11" author="ben">
      <addForeignKeyConstraint constraintName="FK1A21C74F92954237" 
                               referencedTableName="Source"
                               baseColumnNames="authority_id"
                               baseTableName="Source"
                               referencedColumnNames="id"/>
    </changeSet>
    <changeSet id="2011-10-27_12" author="ben">
      <addForeignKeyConstraint constraintName="FK1A21D74F92954237" 
                               referencedTableName="Source"
                               baseColumnNames="Source_id"
                               baseTableName="Source_Source"
                               referencedColumnNames="id"/>
    </changeSet>
    <changeSet id="2011-10-27_13" author="ben">
      <addForeignKeyConstraint constraintName="FK1A21F74F92954237" 
                               referencedTableName="Source"
                               baseColumnNames="sources_id"
                               baseTableName="Source_Source"
                               referencedColumnNames="id"/>
    </changeSet>
    <changeSet id="2011-11-04_01" author="ben">
      <renameTable newTableName="TextContent" oldTableName="Content"/>
    </changeSet>
    <changeSet id="2011-11-04_02" author="ben">
      <renameTable newTableName="TextContent_Source" oldTableName="Content_Source"/>
    </changeSet>
    <changeSet id="2011-11-04_03" author="ben">
      <renameColumn tableName="TextContent_Source" oldColumnName="Content_id" columnDataType="bigint" newColumnName="TextContent_id"/>
    </changeSet>
    <changeSet id="2011-11-04_04" author="ben">
      <dropColumn tableName="TextContent" columnName="DTYPE"/>
    </changeSet>
    <changeSet id="2011-11-09_01" author="ben">
      <sql>
        UPDATE BATCH_JOB_PARAMS SET STRING_VAL = "WCS" WHERE STRING_VAL = "1"; 
      </sql>
    </changeSet>
    <changeSet id="2011-11-09_02" author="ben">
      <addColumn tableName="Annotation">
        <column name="recordType" type="varchar(255)"/>
      </addColumn>
    </changeSet>
    <changeSet id="2011-11-09_03" author="ben">
      <addColumn tableName="Annotation">
        <column name="value" type="varchar(255)"/>
      </addColumn>
    </changeSet>
    <changeSet id="2011-11-09_04" author="ben">
      <sql>
        UPDATE Annotation SET recordType = annotatedObjType; 
      </sql>
    </changeSet>
    <changeSet id="2011-11-09_05" author="ben">
      <sql>
        UPDATE Annotation SET annotatedObjType = NULL where annotatedObjId is NULL; 
      </sql>
    </changeSet>
    <changeSet id="2011-11-09_06" author="ben">
      <sql>
        UPDATE Annotation SET value = code where code in ("rank","related"); 
      </sql>
    </changeSet>
    <changeSet id="2011-11-09_07" author="ben">
      <sql>
        UPDATE Annotation SET value = substring(text,40) where code = "UNEXPECTEDTAXONEXCEPTION"; 
      </sql>
    </changeSet>
    <changeSet id="2011-11-09_08" author="ben">
      <sql>
        UPDATE Annotation SET value = substring(substring(text,7),1,instr(substring(text,7)," ")) where code = "TAXONALREADYPROCESSEDEXCEPTION"; 
      </sql>
    </changeSet>
    <changeSet id="2011-11-09_09" author="ben">
      <sql>
        UPDATE Annotation SET value = substring(text,37) where code = "CANNOTFINDRECORDEXCEPTION"; 
      </sql>
    </changeSet>
    <changeSet id="2011-11-09_10" author="ben">
      <sql>
        UPDATE Annotation SET code = "BadField" where code in ("rank","related"); 
      </sql>
    </changeSet>
    <changeSet id="2011-11-09_11" author="ben">
      <sql>
        UPDATE Annotation SET code = "Update" WHERE code = "Updated"; 
      </sql>
    </changeSet>
    <changeSet id="2011-11-09_12" author="ben">
      <sql>
        UPDATE Annotation SET code = "Create" WHERE code = "Created"; 
      </sql>
    </changeSet>
    <changeSet id="2011-11-09_13" author="ben">
      <sql>
        UPDATE Annotation SET code = "Unexpected" WHERE code = "UNEXPECTEDTAXONEXCEPTION"; 
      </sql>
    </changeSet>
    <changeSet id="2011-11-09_14" author="ben">
      <sql>
        UPDATE Annotation SET code = "BadIdentifier" WHERE code = "CANNOTFINDRECORDEXCEPTION"; 
      </sql>
    </changeSet>
    <changeSet id="2011-11-09_15" author="ben">
      <sql>
        UPDATE Annotation SET code = "BadRecord" WHERE code = "FlatFileParseException"; 
      </sql>
    </changeSet>
    <changeSet id="2011-11-09_16" author="ben">
      <sql>
        UPDATE Annotation SET code = "Present" WHERE type = "Present"; 
      </sql>
    </changeSet>
    <changeSet id="2011-11-09_17" author="ben">
      <sql>
        UPDATE Annotation SET code = "Absent" WHERE type = "Absent"; 
      </sql>
    </changeSet>    
    <changeSet id="2011-11-09_18" author="ben">
      <sql>
        UPDATE Annotation SET type = "Info" WHERE type = "Create"; 
      </sql>
    </changeSet>
    <changeSet id="2011-11-09_19" author="ben">
      <sql>
        UPDATE Annotation SET type = "Info" WHERE type = "Update"; 
      </sql>
    </changeSet>
    <changeSet id="2011-11-09_20" author="ben">
      <sql>
        UPDATE Annotation SET type = "Info" WHERE type = "Present"; 
      </sql>
    </changeSet>
    <changeSet id="2011-11-09_21" author="ben">
      <sql>
        UPDATE Annotation SET type = "Warn" WHERE type = "Absent"; 
      </sql>
    </changeSet>
    <changeSet id="2011-11-09_22" author="ben">
      <sql>
        UPDATE Annotation SET type = "Warn" WHERE type = "Unexpected"; 
      </sql>
    </changeSet>
    <changeSet id="2011-11-09_23" author="ben">
      <sql>
        UPDATE Annotation SET code = "AlreadyProcessed" WHERE code = "TAXONALREADYPROCESSEDEXCEPTION"; 
      </sql>
    </changeSet>
    <changeSet id="2011-11-11_01" author="ben">
      <addColumn tableName="Image">
        <column name="image_id" type="bigint"/>
      </addColumn>
    </changeSet>
    <changeSet id="2011-11-11_02" author="ben">
      <addColumn tableName="Taxon">
        <column name="image_id" type="bigint"/>
      </addColumn>
    </changeSet>
    <changeSet author="ben" id="2011-11-11_03">
        <addForeignKeyConstraint constraintName="FKAB93B2A41EDCD08D" baseTableName="Image" baseColumnNames="image_id"
           referencedTableName="Image" referencedColumnNames="id"
        />
    </changeSet>
    <changeSet author="ben" id="2011-11-11_04">
        <addForeignKeyConstraint constraintName="FKAB93B2A41EDCD08E" baseTableName="Taxon" baseColumnNames="image_id"
           referencedTableName="Image" referencedColumnNames="id"
        />
    </changeSet>
    <changeSet id="2011-11-11_05" author="ben">
      <sql>
        UPDATE Taxon join Taxon_Image on (Taxon.id = Taxon_Image.Taxon_id) SET Taxon.image_id = Taxon_Image.images_id; 
      </sql>
    </changeSet>
    <changeSet id="2011-11-15_01" author="ben">
      <createIndex tableName="Taxon" indexName="Taxon_identifier_IDX" unique="true">
        <column name="identifier"/>
      </createIndex>
    </changeSet>
    <changeSet id="2011-11-15_02" author="ben">
      <createIndex tableName="Image" indexName="Image_identifier_IDX" unique="true">
        <column name="identifier"/>
      </createIndex>
    </changeSet>
    <changeSet id="2011-11-15_03" author="ben">
      <createIndex tableName="Source" indexName="Source_identifier_IDX" unique="true">
        <column name="identifier"/>
      </createIndex>
    </changeSet>
    <changeSet id="2011-11-15_04" author="ben">
      <sql>
        Update Annotation set recordType = "Taxon" where recordType is NULL;
      </sql>
    </changeSet>
    <changeSet id="2011-11-15_05" author="ben">
      <sql>
        UPDATE Taxon SET Taxon.accepted_id = NULL where Taxon.accepted_id = Taxon.id;
      </sql>
    </changeSet>
    <changeSet id="2011-11-15_06" author="ben">
      <sql>
        UPDATE Taxon SET Taxon.status = 'accepted' where Taxon.accepted_id is null;
      </sql>
    </changeSet>
    <changeSet id="2011-11-15_07" author="ben">
      <sql>
        UPDATE Taxon SET Taxon.status = 'synonym' where Taxon.accepted_id is not null;
      </sql>
    </changeSet>
    <changeSet id="2011-11-21_01" author="ben">
      <insert tableName="Group_permissions">
        <column name="Group_id" valueNumeric="1"/>
        <column name="permissions" valueNumeric="13"/>
      </insert>
    </changeSet>
    <changeSet id="2011-11-21_02" author="ben">
      <insert tableName="Group_permissions">
        <column name="Group_id" valueNumeric="1"/>
        <column name="permissions" valueNumeric="14"/>
      </insert>
    </changeSet>
    <changeSet id="2011-11-21_03" author="ben">
      <insert tableName="Group_permissions">
        <column name="Group_id" valueNumeric="1"/>
        <column name="permissions" valueNumeric="15"/>
      </insert>
    </changeSet>
    <changeSet id="2011-11-21_04" author="ben">
      <insert tableName="Group_permissions">
        <column name="Group_id" valueNumeric="1"/>
        <column name="permissions" valueNumeric="16"/>
      </insert>
    </changeSet>
    <changeSet id="2011-11-21_05" author="ben">
      <insert tableName="Group_permissions">
        <column name="Group_id" valueNumeric="1"/>
        <column name="permissions" valueNumeric="17"/>
      </insert>
    </changeSet>
    <changeSet id="2011-11-21_06" author="ben">
      <insert tableName="Group_permissions">
        <column name="Group_id" valueNumeric="1"/>
        <column name="permissions" valueNumeric="18"/>
      </insert>
    </changeSet>
    <changeSet id="2011-11-26_01" author="ben">
      <sql>
        UPDATE Taxon SET Taxon.parent_id = NULL where Taxon.accepted_id is not NULL;
      </sql>
    </changeSet>
    <changeSet author="ben" id="2011-11-26_02">
      <addColumn tableName="Image">
        <column name="description" type="longtext"/>
      </addColumn>
    </changeSet>
    <changeSet author="ben" id="2011-11-26_03">
      <addColumn tableName="Image">
        <column name="format" type="varchar(255)"/>
      </addColumn>
    </changeSet>
    <changeSet author="ben" id="2011-11-26_04">
      <addColumn tableName="Image">
        <column name="keywords" type="varchar(255)"/>
      </addColumn>
    </changeSet>
    <changeSet author="ben" id="2011-11-26_05">
      <addColumn tableName="Image">
        <column name="locality" type="varchar(255)"/>
      </addColumn>
    </changeSet>
    <changeSet author="ben" id="2011-11-26_06">
      <addColumn tableName="Image">
        <column name="location" type="GEOMETRY"/>
      </addColumn>
    </changeSet>
    <changeSet id="2011-11-28_01" author="ben">
      <sql>
        UPDATE Image SET Image.format = 'jpg';
      </sql>
    </changeSet>
    <changeSet author="ben" id="2011-12-02_01">
        <createTable tableName="acl_sid">
            <column name="id" type="bigint(20)" autoIncrement="true">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="principal" type="tinyint(1)">
                <constraints nullable="false"/>
            </column>
            <column name="sid" type="varchar(100)">
                <constraints nullable="false"/>
            </column>            
        </createTable>
    </changeSet>
     <changeSet author="ben" id="2011-12-02_02">
        <createIndex indexName="acl_sid_idx" tableName="acl_sid" unique="true">
            <column name="sid"/>
            <column name="principal"/>
        </createIndex>
    </changeSet>
    <changeSet author="ben" id="2011-12-02_03">
        <createTable tableName="acl_class">
            <column name="id" type="bigint(20)" autoIncrement="true">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="class" type="varchar(255)">
                <constraints nullable="false"/>
            </column>
            <column name="sid" type="varchar(100)">
                <constraints nullable="false"/>
            </column>            
        </createTable>
    </changeSet>
    <changeSet author="ben" id="2011-12-02_04">
        <createIndex indexName="acl_class_idx" tableName="acl_class" unique="true">
            <column name="class"/>
        </createIndex>
    </changeSet>
    <changeSet author="ben" id="2011-12-02_05">
        <createTable tableName="acl_entry">
            <column name="id" type="bigint(20)" autoIncrement="true">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="acl_object_identity" type="bigint(20)">
                <constraints nullable="false"/>
            </column>
            <column name="ace_order" type="int(11)">
                <constraints nullable="false"/>
            </column> 
            <column name="sid" type="bigint(20)">
                <constraints nullable="false"/>
            </column>
            <column name="mask" type="int(11)">
                <constraints nullable="false"/>
            </column>
            <column name="granting" type="tinyint(1)">
                <constraints nullable="false"/>
            </column>
            <column name="audit_success" type="tinyint(1)">
                <constraints nullable="false"/>
            </column>
            <column name="audit_failure" type="tinyint(1)">
                <constraints nullable="false"/>
            </column>
        </createTable>
      </changeSet>
      <changeSet author="ben" id="2011-12-02_06">
        <createIndex indexName="acl_entry_idx" tableName="acl_entry" unique="true">
            <column name="acl_object_identity"/>
            <column name="ace_order"/>
        </createIndex>
    </changeSet>
    <changeSet author="ben" id="2011-12-02_07">
        <createTable tableName="acl_object_identity">
            <column name="id" type="bigint(20)" autoIncrement="true">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="object_id_class" type="bigint(20)">
                <constraints nullable="false"/>
            </column>
            <column name="object_id_identity" type="bigint(20)">
                <constraints nullable="false"/>
            </column>
            <column name="parent_object" type="bigint(20)">
                <constraints nullable="false"/>
            </column>
            <column name="owner_sid" type="bigint(20)">
                <constraints nullable="false"/>
            </column>            
            <column name="entries_inheriting" type="tinyint(1)">
                <constraints nullable="false"/>
            </column>
        </createTable>
      </changeSet>
      <changeSet author="ben" id="2011-12-02_08">
        <createIndex indexName="acl_object_identity_idx" tableName="acl_object_identity" unique="true">
            <column name="object_id_class"/>
            <column name="object_id_identity"/>
        </createIndex>
    </changeSet>
    <changeSet author="ben" id="2011-12-02_09">
        <addForeignKeyConstraint constraintName="acl_entry_object_identity_fk" baseColumnNames="acl_object_identity" baseTableName="acl_entry" referencedColumnNames="id" referencedTableName="acl_object_identity"/>
    </changeSet>
    <changeSet author="ben" id="2011-12-02_10">
        <addForeignKeyConstraint constraintName="acl_entry_sid_fk" baseColumnNames="sid" baseTableName="acl_entry" referencedColumnNames="id" referencedTableName="acl_sid"/>
    </changeSet>
    <changeSet author="ben" id="2011-12-02_11">
        <addForeignKeyConstraint constraintName="acl_object_identity_object_identity_fk" baseColumnNames="parent_object" baseTableName="acl_object_identity" referencedColumnNames="id" referencedTableName="acl_object_identity"/>
    </changeSet>
    <changeSet author="ben" id="2011-12-02_12">
        <addForeignKeyConstraint constraintName="acl_object_identity_class_fk" baseColumnNames="object_id_class" baseTableName="acl_object_identity" referencedColumnNames="id" referencedTableName="acl_class"/>
    </changeSet>
    <changeSet author="ben" id="2011-12-02_13">
        <addForeignKeyConstraint constraintName="acl_object_identity_sid_fk" baseColumnNames="owner_sid" baseTableName="acl_object_identity" referencedColumnNames="id" referencedTableName="acl_sid"/>
    </changeSet>
    <changeSet author="ben" id="2011-12-09_01">
        <dropColumn tableName="acl_class" columnName="sid"/>
    </changeSet>
    <changeSet author="ben" id="2011-12-09_02">
        <dropNotNullConstraint tableName="acl_object_identity" columnName="parent_object" columnDataType="bigint(20)"/>
    </changeSet>
    <changeSet id="2011-13-13_01" author="ben">
      <comment>Added PERMISSION_ADMINISTRATE to the admin group</comment>
      <insert tableName="Group_permissions">
        <column name="Group_id" valueNumeric="1"/>
        <column name="permissions" valueNumeric="19"/>
      </insert>
    </changeSet>
    <changeSet id="2011-12-16_01" author="ben">
      <comment>Added PERMISSION_WRITE_GROUP to the admin group</comment>
      <insert tableName="Group_permissions">
        <column name="Group_id" valueNumeric="1"/>
        <column name="permissions" valueNumeric="20"/>
      </insert>
    </changeSet>
    <changeSet id="2011-12-19_01" author="ben">
      <comment>Implemented changes required for bug #141 Harvest details about Source from DwC Archive</comment>
      <addColumn tableName="Source">
        <column name="creatorEmail" type="varchar(255)"/>
      </addColumn>
    </changeSet>
    <changeSet id="2011-12-19_02" author="ben">
      <comment>Implemented changes required for bug #141 Harvest details about Source from DwC Archive</comment>
      <addColumn tableName="Source">
        <column name="description" type="longtext"/>
      </addColumn>
    </changeSet>
    <changeSet id="2011-12-19_03" author="ben">
      <comment>Implemented changes required for bug #141 Harvest details about Source from DwC Archive</comment>
      <addColumn tableName="Source">
        <column name="logoUrl" type="varchar(255)"/>
      </addColumn>
    </changeSet>
    <changeSet id="2011-12-19_04" author="ben">
      <comment>Implemented changes required for bug #141 Harvest details about Source from DwC Archive</comment>
      <addColumn tableName="Source">
        <column name="publisherName" type="varchar(255)"/>
      </addColumn>
    </changeSet>
    <changeSet id="2011-12-19_05" author="ben">
      <comment>Implemented changes required for bug #141 Harvest details about Source from DwC Archive</comment>
      <addColumn tableName="Source">
        <column name="publisherEmail" type="varchar(255)"/>
      </addColumn>
    </changeSet>
    <changeSet id="2011-12-19_06" author="ben">
      <comment>Implemented changes required for bug #141 Harvest details about Source from DwC Archive</comment>
      <addColumn tableName="Source">
        <column name="subject" type="varchar(255)"/>
      </addColumn>
    </changeSet>
    <changeSet id="2011-12-19_07" author="ben">
      <comment>Implemented changes required for bug #141 Harvest details about Source from DwC Archive</comment>
      <addColumn tableName="Source">
        <column name="title" type="varchar(255)"/>
      </addColumn>
    </changeSet>
    <changeSet id="2011-12-20_01" author="ben">
      <comment>Implemented changes required for bug #54 Process References File</comment>
      <addColumn tableName="Reference">
        <column name="number" type="varchar(255)"/>
      </addColumn>
    </changeSet>
    <changeSet id="2011-12-20_02" author="ben">
      <comment>Implemented changes required for bug #54 Process References File</comment>
      <addColumn tableName="Reference">
        <column name="referenceAbstract" type="longtext"/>
      </addColumn>
    </changeSet>
    <changeSet id="2011-12-20_03" author="ben">
      <comment>Implemented changes required for bug #54 Process References File</comment>
      <addColumn tableName="Reference">
        <column name="keywords" type="varchar(255)"/>
      </addColumn>
    </changeSet>
    <changeSet author="ben" id="2011-12-21_01">
       <comment>Implemented changes required for bug #54 Process References File - adding references to text content</comment>
       <createTable tableName="TextContent_Reference">
            <column name="TextContent_id" type="bigint">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="references_id" type="bigint">
                <constraints nullable="false" primaryKey="true"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="ben" id="2011-12-21_02">
        <comment>Implemented changes required for bug #54 Process References File - adding references to text content</comment>
        <addForeignKeyConstraint constraintName="TextContent_Reference_TextContent_fk" baseColumnNames="TextContent_id" baseTableName="TextContent_Reference" referencedColumnNames="id" referencedTableName="TextContent"/>
    </changeSet>
    <changeSet author="ben" id="2011-12-21_03">
        <comment>Implemented changes required for bug #54 Process References File - adding references to text content</comment>
        <addForeignKeyConstraint constraintName="TextContent_Reference_Reference_fk" baseColumnNames="references_id" baseTableName="TextContent_Reference" referencedColumnNames="id" referencedTableName="Reference"/>
    </changeSet>
</databaseChangeLog>